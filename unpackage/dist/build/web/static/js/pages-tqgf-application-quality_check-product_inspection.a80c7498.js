(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tqgf-application-quality_check-product_inspection"],{"02b6":function(t,e,i){"use strict";i.r(e);var a=i("a977"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"0461":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".u-tr[data-v-6150ffac]{height:%?130?%}",""]),t.exports=e},"08bb":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("fd3c");var n=a(i("e58b")),o={name:"u-radio-group",mixins:[n.default],props:{disabled:{type:Boolean,default:!1},value:{type:[String,Number],default:""},activeColor:{type:String,default:"#2979ff"},size:{type:[String,Number],default:34},labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"circle"},iconSize:{type:[String,Number],default:20},width:{type:[String,Number],default:"auto"},wrap:{type:Boolean,default:!1}},created:function(){this.children=[]},watch:{parentData:function(){this.children.length&&this.children.map((function(t){"function"==typeof t.updateParentData&&t.updateParentData()}))}},computed:{parentData:function(){return[this.value,this.disabled,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.width,this.wrap]}},methods:{setValue:function(t){var e=this;this.children.map((function(e){e.parentData.value!=t&&(e.parentData.value="")})),this.$emit("input",t),this.$emit("change",t),setTimeout((function(){e.dispatch("u-form-item","on-form-change",t)}),60)}}};e.default=o},"0c5f":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uTopTips:i("4c04").default,uTable:i("be41").default,uTr:i("bd71").default,uTd:i("29da").default,uTh:i("8070").default,uInput:i("9d80").default,uRadioGroup:i("20d15").default,uRadio:i("9070").default,uButton:i("dd79").default,uLoading:i("6ccd").default,uIcon:i("c988").default,uPopup:i("ecb3").default,uCellItem:i("ec68").default,uActionSheet:i("0323").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"product_inspection"},[i("u-top-tips",{ref:"uToast"}),i("page-loading",{attrs:{loadmore:t.loadmore},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.refresh.apply(void 0,arguments)}}},[i("u-table",[i("u-tr",{staticStyle:{"min-height":"70rpx",height:"auto"}},[i("u-td",{staticClass:"table-label"},[t._v("产品名称")]),i("u-td",{staticClass:"table-value"},[t._v(t._s(t.production_obj.product_name))]),i("u-td",{staticClass:"table-label"},[t._v("批号/序号")]),i("u-td",{staticClass:"table-value"},[t._v(t._s(t.production_obj.batch_code+"-"+t.production_obj.serial_num||""))]),i("u-td",{staticClass:"table-label"},[t._v("产品规格")]),i("u-td",{staticClass:"table-value"},[t._v(t._s(t.production_obj.size||""))]),i("u-td",{staticClass:"table-label"},[t._v("产品数量")]),i("u-td",{staticClass:"table-value"},[t._v(t._s(t.production_obj.product_qty?t.production_obj.product_qty+"件":""))])],1)],1),i("v-uni-scroll-view",{staticClass:"product-table",style:{height:t.iskeyOpen?"calc(100% - 386rpx + 110rpx + 154rpx)":""},attrs:{"scroll-x":!0,"scroll-y":!0,"show-scrollbar":!0}},[i("u-table",{staticStyle:{"border-top":"none","table-layout":"fixed",width:"100%","padding-bottom":"260rpx"}},[i("u-tr",{staticStyle:{height:"auto",position:"sticky",top:"0","z-index":"11"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none"}},[t._v(t._s("检验项\n（标准值）"))]),i("u-td",{staticStyle:{flex:"auto","flex-grow":"1",padding:"0","border-bottom":"0","border-right":"0"}},[i("u-tr",{staticStyle:{"min-height":"130rpx",height:"auto"}},t._l(t.categoryList,(function(e,a){return i("u-th",{key:a,staticStyle:{"white-space":"pre-wrap","word-break":"break-all","font-weight":"500"},attrs:{width:t.isBespread?"":"300rpx"}},[t._v(t._s(e.type)),e.type_s?i("v-uni-view",{style:{fontSize:e.type_s.length>10?"20rpx":"26rpx"}},[t._v("("+t._s(e.type_s)+")")]):t._e()],1)})),1)],1)],1),i("u-tr",{staticStyle:{"min-height":"70rpx",height:"auto"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none"}},[t._v("检验工具")]),i("u-td",{staticStyle:{flex:"auto","flex-grow":"1",padding:"0","border-bottom":"0","border-right":"0"}},[i("u-tr",{staticStyle:{height:"100%"}},t._l(t.categoryList,(function(e,a){return i("u-th",{key:a,staticClass:"category-cell",staticStyle:{"font-weight":"400"},attrs:{width:t.isBespread?"":"300rpx"}},["外观"==e.type?i("v-uni-view"):[i("u-input",{attrs:{type:"text","input-align":"center",disabled:!0,placeholder:""},model:{value:e.tool,callback:function(i){t.$set(e,"tool",i)},expression:"item.tool"}})]],2)})),1)],1)],1),i("u-tr",{staticStyle:{"min-height":"70rpx",height:"auto"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none"}},[t._v("工具编号")]),i("u-td",{staticStyle:{flex:"auto","flex-grow":"1",padding:"0","border-bottom":"0","border-right":"0"}},[i("u-tr",{staticStyle:{height:"100%"}},t._l(t.categoryList,(function(e,a){return i("u-th",{key:a,staticStyle:{"font-weight":"400"},attrs:{width:t.isBespread?"":"300rpx"}},["外观"==e.type?i("v-uni-view"):[i("u-input",{attrs:{type:"text","input-align":"center",disabled:!0,placeholder:""},model:{value:e.code,callback:function(i){t.$set(e,"code",i)},expression:"item.code"}})]],2)})),1)],1)],1),t.production_obj.x_norm_tolerance?i("u-tr",{staticStyle:{"min-height":"70rpx",height:"auto"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none"}},[t._v("检验公差")]),i("u-th",{staticStyle:{"flex-grow":"1","text-align":"left",padding:"10rpx 30rpx"},style:{flex:t.isBespread?"":"0 0 "+300*t.categoryList.length+"rpx"}},[t._v(t._s(t.production_obj.x_norm_tolerance||""))])],1):t._e(),i("u-tr",{staticStyle:{"min-height":"70rpx",height:"auto"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none","font-size":"40rpx","font-weight":"bold","writing-mode":"vertical-rl","letter-spacing":"10rpx","text-orientation":"upright",color:"#C0C4CC"}},[t._v("*")]),i("u-td",{staticStyle:{flex:"auto","flex-grow":"1",padding:"0","border-bottom":"0","border-right":"0"}},t._l(t.inspection_list,(function(e,a){return i("u-tr",{key:a},t._l(e,(function(e,n){return i("u-td",{key:n,staticClass:"category-cell",attrs:{width:t.isBespread?"auto":"300rpx"}},["Measure"===e.type_value?[i("v-uni-input",{attrs:{value:e[e.type],type:"number","input-align":"center",clearable:!1,"selection-start":String(e[e.type]).length-1,"selection-end":String(e[e.type]).length-1,placeholder:null===e[e.type]?"*":"",disabled:null===e[e.type]||!t.isEdit||"密度"===e.title},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.inputBlur(e,a,n)}.apply(void 0,arguments)}}})]:[i("u-input",{attrs:{value:e[e.type],type:"text","input-align":"center",clearable:!1,placeholder:null===e[e.type]?"*":"",disabled:null===e[e.type]||!t.isEdit},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputTextChange.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),function(e){return t.inputTextBlur(e,a,n)}.apply(void 0,arguments)}}})]],2)})),1)})),1)],1),i("u-tr",{staticStyle:{"min-height":"100rpx",height:"auto"}},[i("u-td",{staticClass:"table-label",staticStyle:{flex:"none"}},[t._v("平均值")]),i("u-td",{staticStyle:{flex:"auto","flex-grow":"1",padding:"0","border-bottom":"0","border-right":"0"}},[i("u-tr",{staticStyle:{height:"100%"}},t._l(t.categoryList.filter((function(t){return t.type})),(function(e,a){return i("u-th",{key:a,staticStyle:{"font-weight":"400"},attrs:{width:t.isBespread?"":"300rpx"}},[i("u-input",{attrs:{type:"text","input-align":"center",disabled:!0,placeholder:""},model:{value:e.average_value,callback:function(i){t.$set(e,"average_value",i)},expression:"item.average_value"}})],1)})),1)],1)],1)],1)],1),i("u-table",{staticStyle:{position:"fixed",left:"0",bottom:"152rpx"},style:t.iskeyOpen?t.hideStyle:{}},[i("u-tr",{staticStyle:{height:"100rpx"}},[t.isJISHU?t._e():i("u-td",{staticStyle:{"font-weight":"bold","font-size":"32rpx",color:"#333"}},[t._v("检验类型")]),t.isJISHU?t._e():i("u-td",{staticStyle:{"align-items":"center"}},[i("u-radio-group",{model:{value:t.production_obj.check_type,callback:function(e){t.$set(t.production_obj,"check_type",e)},expression:"production_obj.check_type"}},t._l(t.checkTypeList,(function(e,a){return i("u-radio",{key:a,attrs:{name:e.value}},[t._v(t._s(e.label))])})),1)],1),i("u-td",{staticStyle:{"font-weight":"bold","font-size":"32rpx",color:"#333"}},[t._v("检验结果")]),i("u-td",[i("v-uni-text",{staticStyle:{"font-weight":"bold","font-size":"40rpx"},style:{color:t.checkResultFilter(t.production_obj.check_result)}},[t._v(t._s(t.production_obj.check_result||""))])],1)],1)],1),t.isEdit?i("v-uni-view",{staticClass:"product-btn-box",style:t.iskeyOpen?t.hideStyle:{}},[i("v-uni-view",{staticClass:"btn-box-left"},[i("u-button",{attrs:{loading:t.saveLoading,type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.inspectionConfirm(!0,!1)}}},[t._v("暂存/保存")]),i("u-button",{attrs:{type:"success",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.inspectionConfirm(!0,!0)}}},[t._v("提交")]),t.resetCheckLoading?i("v-uni-text",{staticStyle:{opacity:".7"}},[i("u-loading",{staticStyle:{"margin-bottom":"4rpx","margin-right":"10rpx"},attrs:{mode:"circle",color:t.$mStore.state.themeColor.color}}),t._v("一键清空质检数据")],1):i("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetCheck.apply(void 0,arguments)}}},[t._v("一键清空质检数据")])],1),i("v-uni-view",{staticClass:"btn-box-right"},[i("v-uni-view",{staticClass:"btn-box-label"},[t._v("人工判定")]),i("u-button",{attrs:{type:"success",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("success")}}},[t._v("合格")]),i("u-button",{attrs:{type:"warning",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("warning")}}},[t._v("让步放行")]),i("u-button",{attrs:{type:"error",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("error")}}},[t._v("隔离")]),i("u-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("fanxiu")}}},[t._v("返修/核实")]),t.production_obj.check_result&&"让步放行"!=t.production_obj.check_result?t._e():i("u-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit_jishu.apply(void 0,arguments)}}},[t._v("提交技术判定")])],1)],1):t.isJISHU?i("v-uni-view",{staticClass:"product-btn-box",style:t.iskeyOpen?t.hideStyle:{}},[i("v-uni-view",{staticClass:"btn-box-right"},[i("v-uni-view",{staticClass:"btn-box-label"},[t._v("技术判定")]),i("u-button",{attrs:{type:"warning",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("warning")}}},[t._v("让步放行")]),i("u-button",{attrs:{type:"error",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("error")}}},[t._v("隔离")]),i("u-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("fanxiu")}}},[t._v("返修/核实")]),i("u-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.judgeHanlder("zhuan")}}},[t._v("转实验流转并补产")])],1)],1):t._e(),[i("v-uni-view",{staticClass:"pagination-btn left",class:t.paginationIndex<=0?"disabled":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.prevHandle(t.paginationIndex)}}},[i("u-icon",{attrs:{name:"arrow-left",size:"60",color:t.$mStore.state.themeColor.color}})],1),i("v-uni-view",{staticClass:"pagination-btn right",class:t.paginationIndex>=t.pagination_ids.length?"disabled":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nextHandle(t.paginationIndex)}}},[i("u-icon",{attrs:{name:"arrow-right",size:"60",color:t.$mStore.state.themeColor.color}})],1)],i("u-popup",{staticClass:"show-header popup-loading",attrs:{mode:"bottom"},model:{value:t.searchToolFlag,callback:function(e){t.searchToolFlag=e},expression:"searchToolFlag"}},[i("v-uni-view",{staticClass:"popup-header"},[i("v-uni-view",{staticClass:"right",style:{color:t.$mStore.state.themeColor.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTool.apply(void 0,arguments)}}},[t._v("清除选择")])],1),t.toolsLoading?i("v-uni-view",{staticClass:"popup-empty"},[i("u-loading",{attrs:{mode:"circle"}})],1):t.matchToolList.length<=0?i("v-uni-view",{staticClass:"popup-empty"},[i("empty",{attrs:{text:"暂无工具"}})],1):t._l(t.matchToolList,(function(e,a){return i("u-cell-item",{key:a,attrs:{title:e.text,arrow:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTool(a)}}})}))],2),i("u-action-sheet",{attrs:{list:t.eligibleList,"safe-area-inset-bottom":!0,"cancel-text":"清除选择"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectEligible.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.closeEligible.apply(void 0,arguments)}},model:{value:t.eligibleToolFlag,callback:function(e){t.eligibleToolFlag=e},expression:"eligibleToolFlag"}})],2)],1)},o=[]},"10e6":function(t,e,i){"use strict";var a=i("baa4"),n=i.n(a);n.a},"14f7":function(t,e,i){"use strict";i.r(e);var a=i("e913"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"1dbd":function(t,e,i){"use strict";var a=i("ac5f"),n=i("1fc1"),o=i("41c7"),r=i("ae5c"),l=function(t,e,i,c,s,u,d,f){var p,h,g=s,b=0,v=!!d&&r(d,f);while(b<c)b in i&&(p=v?v(i[b],b,e):i[b],u>0&&a(p)?(h=n(p),g=l(t,e,p,h,g,u-1)-1):(o(g+1),t[g]=p),g++),b++;return g};t.exports=l},"20d15":function(t,e,i){"use strict";i.r(e);var a=i("a394"),n=i("c9b6");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("10e6");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"1cf76df8",null,!1,a["a"],void 0);e["default"]=l.exports},2354:function(t,e,i){"use strict";var a=i("b46c"),n=i.n(a);n.a},"2a5d":function(t,e,i){var a=i("bb9d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("491ed54f",a,!0,{sourceMap:!1,shadowMode:!1})},"2a9d":function(t,e,i){"use strict";i.r(e);var a=i("548f"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"2b60":function(t,e,i){"use strict";var a=i("2a5d"),n=i.n(a);n.a},"30a8":function(t,e,i){var a=i("0461");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("1fad7ad6",a,!0,{sourceMap:!1,shadowMode:!1})},4437:function(t,e,i){"use strict";var a=i("30a8"),n=i.n(a);n.a},"4c04":function(t,e,i){"use strict";i.r(e);var a=i("b95a8"),n=i("02b6");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("2354");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"29e0ea8a",null,!1,a["a"],void 0);e["default"]=l.exports},"548f":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var a={name:"u-cell-item",props:{icon:{type:String,default:""},title:{type:[String,Number],default:""},value:{type:[String,Number],default:""},label:{type:[String,Number],default:""},borderBottom:{type:Boolean,default:!0},borderTop:{type:Boolean,default:!1},hoverClass:{type:String,default:"u-cell-hover"},arrow:{type:Boolean,default:!0},center:{type:Boolean,default:!1},required:{type:Boolean,default:!1},titleWidth:{type:[Number,String],default:""},arrowDirection:{type:String,default:"right"},titleStyle:{type:Object,default:function(){return{}}},valueStyle:{type:Object,default:function(){return{}}},labelStyle:{type:Object,default:function(){return{}}},bgColor:{type:String,default:"transparent"},index:{type:[String,Number],default:""},useLabelSlot:{type:Boolean,default:!1},iconSize:{type:[Number,String],default:34},iconStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{arrowStyle:function(){var t={};return"up"==this.arrowDirection?t.transform="rotate(-90deg)":"down"==this.arrowDirection?t.transform="rotate(90deg)":t.transform="rotate(0deg)",t}},methods:{click:function(){this.$emit("click",this.index)}}};e.default=a},"5eac":function(t,e,i){"use strict";var a=i("c58b"),n=i.n(a);n.a},"66eb":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */[data-v-1cf76df8]:export{baseColor:#6190e8;primary_color:#6190e8;uni_bg:#fff;uni_bg_dark:#12183d;uni_bg_dark_light:#262b54}.u-radio-group[data-v-1cf76df8]{display:inline-flex;flex-wrap:wrap}',""]),t.exports=e},"71cb":function(t,e,i){"use strict";var a=i("8bdb"),n=i("1dbd"),o=i("1099"),r=i("1fc1"),l=i("497b"),c=i("3242");a({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),i=r(e),a=c(e,0);return a.length=n(a,e,e,i,0,void 0===t?1:l(t)),a}})},"8a06":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uIcon:i("c988").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-cell",class:{"u-border-bottom":t.borderBottom,"u-border-top":t.borderTop,"u-col-center":t.center,"u-cell--required":t.required},style:{backgroundColor:t.bgColor},attrs:{"hover-stay-time":"150","hover-class":t.hoverClass},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click.apply(void 0,arguments)}}},[t.icon?i("u-icon",{staticClass:"u-cell__left-icon-wrap",attrs:{size:t.iconSize,name:t.icon,"custom-style":t.iconStyle}}):i("v-uni-view",{staticClass:"u-flex"},[t._t("icon")],2),i("v-uni-view",{staticClass:"u-cell_title",style:[{width:t.titleWidth?t.titleWidth+"rpx":"auto"},t.titleStyle]},[""!==t.title?[t._v(t._s(t.title))]:t._t("title"),t.label||t.$slots.label?i("v-uni-view",{staticClass:"u-cell__label",style:[t.labelStyle]},[""!==t.label?[t._v(t._s(t.label))]:t._t("label")],2):t._e()],2),i("v-uni-view",{staticClass:"u-cell__value",style:[t.valueStyle]},[""!==t.value?[t._v(t._s(t.value))]:t._t("default")],2),t.$slots["right-icon"]?i("v-uni-view",{staticClass:"u-flex u-cell_right"},[t._t("right-icon")],2):t._e(),t.arrow?i("u-icon",{staticClass:"u-icon-wrap u-cell__right-icon-wrap",style:[t.arrowStyle],attrs:{name:"arrow-right"}}):t._e()],1)},o=[]},9070:function(t,e,i){"use strict";i.r(e);var a=i("e282"),n=i("c8cb");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("5eac");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"4eac95d5",null,!1,a["a"],void 0);e["default"]=l.exports},a394:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-radio-group u-clearfix"},[this._t("default")],2)},n=[]},a977:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var a={name:"u-top-tips",props:{navbarHeight:{type:[Number,String],default:44},zIndex:{type:[Number,String],default:""}},data:function(){return{timer:null,isShow:!1,title:"",type:"primary",duration:2e3}},computed:{uZIndex:function(){return this.zIndex?this.zIndex:this.$u.zIndex.topTips}},methods:{show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};clearTimeout(this.timer),e.duration&&(this.duration=e.duration),e.type&&(this.type=e.type),this.title=e.title,this.isShow=!0,this.timer=setTimeout((function(){t.isShow=!1,clearTimeout(t.timer),t.timer=null}),this.duration)}}};e.default=a},b2bd:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */[data-v-29e0ea8a]:export{baseColor:#6190e8;primary_color:#6190e8;uni_bg:#fff;uni_bg_dark:#12183d;uni_bg_dark_light:#262b54}uni-view[data-v-29e0ea8a]{box-sizing:border-box}.u-tips[data-v-29e0ea8a]{width:100%;position:fixed;z-index:1;padding:%?20?% %?30?%;color:#fff;font-size:%?28?%;left:0;right:0;display:flex;flex-direction:row;align-items:center;justify-content:center;opacity:0;-webkit-transform:translateY(-100%);transform:translateY(-100%);transition:all .35s linear}.u-tip-show[data-v-29e0ea8a]{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;z-index:99}.u-primary[data-v-29e0ea8a]{background:#6190e8}.u-success[data-v-29e0ea8a]{background:#28c76f}.u-warning[data-v-29e0ea8a]{background:#ff9f43}.u-error[data-v-29e0ea8a]{background:#ea5455}.u-info[data-v-29e0ea8a]{background:#909399}',""]),t.exports=e},b3f5:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */[data-v-4eac95d5]:export{baseColor:#6190e8;primary_color:#6190e8;uni_bg:#fff;uni_bg_dark:#12183d;uni_bg_dark_light:#262b54}.u-radio[data-v-4eac95d5]{display:inline-flex;align-items:center;overflow:hidden;-webkit-user-select:none;user-select:none;line-height:1.8}.u-radio__icon-wrap[data-v-4eac95d5]{color:#606266;display:flex;flex-direction:row;flex:none;align-items:center;justify-content:center;box-sizing:border-box;width:%?42?%;height:%?42?%;color:transparent;text-align:center;transition-property:color,border-color,background-color;font-size:20px;border:1px solid #c8c9cc;transition-duration:.2s}.u-radio__icon-wrap--circle[data-v-4eac95d5]{border-radius:100%}.u-radio__icon-wrap--square[data-v-4eac95d5]{border-radius:3px}.u-radio__icon-wrap--checked[data-v-4eac95d5]{color:#fff;background-color:#2979ff;border-color:#2979ff}.u-radio__icon-wrap--disabled[data-v-4eac95d5]{background-color:#ebedf0;border-color:#c8c9cc}.u-radio__icon-wrap--disabled--checked[data-v-4eac95d5]{color:#c8c9cc!important}.u-radio__label[data-v-4eac95d5]{word-wrap:break-word;margin-left:%?10?%;margin-right:%?24?%;color:#606266;font-size:%?30?%}.u-radio__label--disabled[data-v-4eac95d5]{color:#c8c9cc}',""]),t.exports=e},b46c:function(t,e,i){var a=i("b2bd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("337ef208",a,!0,{sourceMap:!1,shadowMode:!1})},b95a8:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-tips",class:["u-"+this.type,this.isShow?"u-tip-show":""],style:{top:this.navbarHeight+"px",zIndex:this.uZIndex}},[this._v(this._s(this.title))])},n=[]},baa4:function(t,e,i){var a=i("66eb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("760d2a0d",a,!0,{sourceMap:!1,shadowMode:!1})},bb9d:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */[data-v-6150ffac]:export{baseColor:#6190e8;primary_color:#6190e8;uni_bg:#fff;uni_bg_dark:#12183d;uni_bg_dark_light:#262b54}.repair-popup[data-v-6150ffac] .uni-popup-dialog{width:%?800?%}.repair-popup[data-v-6150ffac] .uni-popup-dialog .uni-dialog-title{padding-top:%?32?%}.repair-popup[data-v-6150ffac] .uni-popup-dialog .uni-dialog-title .uni-dialog-title-text{color:#333}.repair-popup[data-v-6150ffac] .uni-popup-dialog .uni-dialog-content{padding:%?20?% %?30?%}.repair-content[data-v-6150ffac]{width:100%;padding:%?20?%}.repair-content uni-textarea[data-v-6150ffac]{min-height:%?400?%;width:100%}[data-v-6150ffac] .u-input__input{min-height:100%!important}.product_inspection .product-table[data-v-6150ffac]{height:calc(100% - %?386?%)}.product_inspection .product-table[data-v-6150ffac] .u-td{height:auto}.product_inspection .product-table .uni-input-placeholder[data-v-6150ffac]{font-weight:400}@media (min-width:1009px){.product_inspection .product-table[data-v-6150ffac] .uni-scroll-view::-webkit-scrollbar{display:block;width:%?18?%!important;height:%?18?%!important}.product_inspection .product-table[data-v-6150ffac] .uni-scroll-view::-webkit-scrollbar-thumb{background-color:#606266;border-radius:%?10?%}}.product_inspection .table-label[data-v-6150ffac]{font-size:%?28?%;color:#303133;font-weight:700;background-color:#fff;flex:none;width:%?160?%;height:auto}.product_inspection .table-value[data-v-6150ffac]{height:auto}.product_inspection .product-btn-box[data-v-6150ffac]{display:flex;align-items:flex-end;justify-content:space-around;padding:%?20?% %?20?% %?40?%;position:fixed;width:100%;bottom:0;left:0;border-top:%?2?% solid #e4e7ed;background-color:#fff}.product_inspection .product-btn-box .btn-box-left[data-v-6150ffac]{flex:auto}.product_inspection .product-btn-box .btn-box-left .u-btn[data-v-6150ffac],\n.product_inspection .product-btn-box .btn-box-left uni-button[data-v-6150ffac],\n.product_inspection .product-btn-box .btn-box-left uni-text[data-v-6150ffac]{width:auto;display:inline-block;margin:%?6?% 0;margin-left:%?40?%}.product_inspection .product-btn-box .btn-box-left uni-text[data-v-6150ffac]{color:#6190e8}.product_inspection .product-btn-box .btn-box-right[data-v-6150ffac]{flex:60%;text-align:right}.product_inspection .product-btn-box .btn-box-right .u-btn[data-v-6150ffac]{width:auto;display:inline-block;margin:%?6?% 0;margin-right:%?40?%}.product_inspection .product-btn-box .btn-box-right .btn-box-label[data-v-6150ffac]{display:inline-block;margin-right:%?18?%;font-weight:700}@media (max-width:839px){.product_inspection .product-btn-box .btn-box-right .btn-box-label[data-v-6150ffac]{display:block}}.product_inspection .popup-loading[data-v-6150ffac] .u-drawer__scroll-view{height:70vh}.product_inspection .pagination-btn[data-v-6150ffac]{position:fixed;top:50%;width:%?160?%;height:%?160?%;background-color:rgba(120,192,255,.26);border-radius:50%;display:flex;align-items:center;justify-content:center;-webkit-transform:translateY(%?-80?%);transform:translateY(%?-80?%);z-index:99;cursor:pointer}.product_inspection .pagination-btn.disabled[data-v-6150ffac]{opacity:.4}.product_inspection .pagination-btn.left[data-v-6150ffac]{left:%?30?%}.product_inspection .pagination-btn.right[data-v-6150ffac]{right:%?30?%}.product_inspection .suspend-scan[data-v-6150ffac]{width:%?80?%;height:%?80?%;position:fixed;z-index:9;display:flex;flex-direction:row;flex-direction:column;align-items:center;justify-content:center;background-color:#6190e8;color:#fff;bottom:%?350?%;right:%?40?%;border-radius:50%}.category-cell[data-v-6150ffac]{position:relative}.category-cell .key-list-box[data-v-6150ffac]{position:absolute;left:50%;top:124%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:90%;background-color:#fff;z-index:999;box-shadow:0 0 %?20?% rgba(0,0,0,.3);border-radius:%?10?%}.category-cell .key-list-box .keyword-entry[data-v-6150ffac]{line-height:%?110?%;height:%?110?%;max-width:100%;font-size:%?40?%;color:#333;padding:0 %?30?%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.category-cell .key-list-box .keyword-entry[data-v-6150ffac]:not(:last-child){border-bottom:solid %?4?% #fff}.keyword-entry-tap[data-v-6150ffac]{background-color:#eee}@media (min-width:375px) and (max-width:1009px){.product-table[data-v-6150ffac]{height:calc(100% - %?438?%)!important}}.box_bt[data-v-6150ffac]{border-bottom:unset!important}.box_pd[data-v-6150ffac]{padding:unset!important}.box_br[data-v-6150ffac]{border-right:unset!important}.box_cus[data-v-6150ffac]{padding:10px 3px!important}',""]),t.exports=e},c58b:function(t,e,i){var a=i("b3f5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("2a5ebc78",a,!0,{sourceMap:!1,shadowMode:!1})},c8cb:function(t,e,i){"use strict";i.r(e);var a=i("deff"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},c9b6:function(t,e,i){"use strict";i.r(e);var a=i("08bb"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},cfe0:function(t,e,i){"use strict";var a=i("d229"),n=i.n(a);n.a},d229:function(t,e,i){var a=i("f66b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("5f4db69e",a,!0,{sourceMap:!1,shadowMode:!1})},deff:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("aa9c");var a={name:"u-radio",props:{name:{type:[String,Number],default:""},shape:{type:String,default:""},disabled:{type:[String,Boolean],default:""},labelDisabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""}},data:function(){return{parentData:{iconSize:null,labelDisabled:null,disabled:null,shape:null,activeColor:null,size:null,width:null,height:null,value:null,wrap:null}}},created:function(){this.parent=!1,this.updateParentData(),this.parent.children.push(this)},computed:{elDisabled:function(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled:function(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize:function(){return this.size?this.size:this.parentData.size?this.parentData.size:34},elIconSize:function(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:20},elActiveColor:function(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"primary"},elShape:function(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},iconStyle:function(){var t={};return this.elActiveColor&&this.parentData.value==this.name&&!this.elDisabled&&(t.borderColor=this.elActiveColor,t.backgroundColor=this.elActiveColor),t.width=this.$u.addUnit(this.elSize),t.height=this.$u.addUnit(this.elSize),t},iconColor:function(){return this.name==this.parentData.value?"#ffffff":"transparent"},iconClass:function(){var t=[];return t.push("u-radio__icon-wrap--"+this.elShape),this.name==this.parentData.value&&t.push("u-radio__icon-wrap--checked"),this.elDisabled&&t.push("u-radio__icon-wrap--disabled"),this.name==this.parentData.value&&this.elDisabled&&t.push("u-radio__icon-wrap--disabled--checked"),t.join(" ")},radioStyle:function(){var t={};return this.parentData.width&&(t.width=this.$u.addUnit(this.parentData.width),t.flex="0 0 ".concat(this.$u.addUnit(this.parentData.width))),this.parentData.wrap&&(t.width="100%",t.flex="0 0 100%"),t}},methods:{updateParentData:function(){this.getParentData("u-radio-group")},onClickLabel:function(){this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},toggle:function(){this.elDisabled||this.setRadioCheckedStatus()},emitEvent:function(){this.parentData.value!=this.name&&this.$emit("change",this.name)},setRadioCheckedStatus:function(){this.emitEvent(),this.parent&&(this.parent.setValue(this.name),this.parentData.value=this.name)}}};e.default=a},e089:function(t,e,i){"use strict";i.r(e);var a=i("0c5f"),n=i("14f7");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("4437"),i("2b60");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"6150ffac",null,!1,a["a"],void 0);e["default"]=l.exports},e282:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uIcon:i("c988").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-radio",style:[t.radioStyle]},[i("v-uni-view",{staticClass:"u-radio__icon-wrap",class:[t.iconClass],style:[t.iconStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle.apply(void 0,arguments)}}},[i("u-icon",{staticClass:"u-radio__icon-wrap__icon",attrs:{name:"checkbox-mark",size:t.elIconSize,color:t.iconColor}})],1),i("v-uni-view",{staticClass:"u-radio__label",style:{fontSize:t.$u.addUnit(t.labelSize)},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLabel.apply(void 0,arguments)}}},[t._t("default")],2)],1)},o=[]},e913:function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("39d8")),o=a(i("b7c7")),r=a(i("2634")),l=a(i("2fdc")),c=a(i("9b1b"));i("8f71"),i("bf0f"),i("fd3c"),i("c223"),i("0c26"),i("bd06"),i("2797"),i("aa9c"),i("22b6"),i("5c47"),i("a1c1"),i("dd2b"),i("aa77"),i("2c10"),i("64aa"),i("4626"),i("5ac7"),i("71cb"),i("f18a"),i("5ef2"),i("18f7"),i("de6c"),i("7a76"),i("c9b5");var s=a(i("e2c1")),u=a(i("56b4")),d=i("2118"),f=i("6c62"),p=a(i("e944")),h=i("239d"),g={components:{pageLoading:p.default},data:function(){return{toolTimer:null,saveTimer:null,submitTime:null,iskeyOpen:!1,containerStyle:{},loadmore:"loadmore",isSave:!1,saveLoading:!1,submitLoading:!1,toolsLoading:!1,resetCheckLoading:!1,repairShow:!1,typeValue:"",workshop:"",check_name:"",production_obj:{},check_list:[],category_list:[],other_category_list:[],inspection_list:[],userList:[],editingIndex:null,editRowIndex:null,toolList:[],hideStyle:{height:0,overflow:"hidden",padding:0,border:0},confirmStyle:{height:"110rpx",lineHeight:"110rpx",paddingRight:"20px",fontSize:"36px",marginTop:"20rpx",backgroundColor:"#67fcf2"},searchToolFlag:!1,eligibleToolFlag:!1,isConfirmButtonShow:!0,checkTypeList:f.check_type_list.filter((function(t){return null!=t.value})),eligibleList:[{id:1,value:!0,text:"合格"},{id:2,value:!1,text:"隔离"}],standard_values:[],average_values:[],groupSigns:d.groupSigns,is_first_check:!0,isEdit:!0,repairDec:"",pagination_ids:[],paginationIndex:0,inspector_user:"",search_word:"",production_state:!1,check_state:!1,isBack:!1}},computed:{isBespread:function(){return this.$mStore.state.sysInfo.windowWidth>300*this.categoryList.length/2},isJISHU:function(){return this.$mStore.state.user.group_info[d.groupSigns.JISHU]&&"技术判定"==this.production_obj.check_result},matchToolList:function(){return this.toolList.map((function(t){return(0,c.default)((0,c.default)({},t),{},{text:t.display_name})}))},categoryList:function(){return this.iskeyOpen||this.isJISHU||this.category_list.length<=7?this.category_list:this.category_list.concat([{},{},{},{}])}},methods:{initData:function(t){var e=this;return(0,l.default)((0,r.default)().mark((function i(){var a,n,o,l;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.loadmore="loadmore",i.next=3,e.getProductionInfo(t.id);case 3:return o=(null===(a=e.production_obj.categ_id)||void 0===a?void 0:a.length)>1?e.production_obj.categ_id[1].split("/"):[],l=(null===(n=o[o.length-1])||void 0===n?void 0:n.trim())||"",uni.setNavigationBarTitle({title:"".concat(l,"检验")}),i.next=8,e.getProductionIds(t.domain);case 8:return e.paginationIndex=e.pagination_ids.findIndex((function(t){return t===e.production_obj.id})),uni.onKeyboardHeightChange(e.onKeyboardHeightChange),i.next=12,e.$mStore.dispatch("user/hasGroup",d.groupSigns.JISHU);case 12:return e.$mStore.state.user.group_info[d.groupSigns.JISHU]&&(e.isEdit=!1),e.getToolList(),i.next=16,e.getStandardValues();case 16:return e.getOtherInfo(),i.next=19,e.getCheckList();case 19:if(t.search_word&&(e.search_word=t.search_word),e.production_state&&e.check_state){i.next=23;break}return e.autoDoneProduction(),i.abrupt("return");case 23:e.production_obj.check_result&&e.showCheckResult();case 24:case"end":return i.stop()}}),i)})))()},checkResultFilter:function(t){var e="";switch(t){case"合格":case"让步放行":e="#28C76F";break;case"不合格":case"隔离":e="#EA5455";break;case"待检验":e="#6190e8";break;case"技术判定":e="#FF9F43";break;case"返修中":e="#909399";break;default:e="#909399"}return e},inputChange:function(t){return t.detail.value},inputBlur:function(t,e,i){this.inspection_list[e][i][this.inspection_list[e][i].type]=t.detail.value},inputTextChange:function(t){return t},inputTextBlur2:function(t){this.inspector_user=t.detail.value},inputTextBlur:function(t,e,i){this.inspection_list[e][i][this.inspection_list[e][i].type]=t},getOtherInfo:function(){var t=this.mapStandardValue("密度");this.other_category_list=[{type:t?"密度\n（".concat(t,"）"):"密度",type_value:"Measure",content:[{title:"密度",measure:this.production_obj.density||0,note:!1}]}]},getProductionIds:function(){var t=arguments,e=this;return(0,l.default)((0,r.default)().mark((function i(){var a,n,o;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:[],n=s.default.env.model("mrp.production"),i.next=4,n.search_read({order:"id DESC",domain:a,fields:["id"]});case 4:o=i.sent,o&&o.length&&(e.pagination_ids=o.map((function(t){return t.id})));case 6:case"end":return i.stop()}}),i)})))()},getProductionInfo:function(t){var e=this;return(0,l.default)((0,r.default)().mark((function i(){var a,n,o,l,u;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t||e.production_obj.id,n=s.default.env.model("mrp.production"),i.prev=2,o=[],o=e.search_word?[["lot_producing_id","ilike",e.search_word||""]]:[["id","=",a]],i.next=7,n.search_read({domain:o});case 7:if(l=i.sent,!l){i.next=23;break}if(u={},!(l.length>0)){i.next=21;break}if(u=l[0],e.checkIds=u.check_ids||[],!(e.checkIds.length<=0)){i.next=17;break}return e.production_state=!1,e.check_state=!1,i.abrupt("return");case 17:e.production_state=!0,e.production_obj=(0,c.default)({},u),i.next=23;break;case 21:uni.showToast({title:"未查询到产品",icon:"none"}),e.production_state=!1;case 23:i.next=27;break;case 25:i.prev=25,i.t0=i["catch"](2);case 27:case"end":return i.stop()}}),i,null,[[2,25]])})))()},getCheckList:function(){var t=this;return(0,l.default)((0,r.default)().mark((function e(){var i,a,l,c,u,d,f,p,g,b,v,_,m,y,w,x,k,S,C,T,j;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],l=s.default.env.model("quality.check"),c=t.production_obj.check_ids,uni.getStorageSync("company_id"),u=s.default.env.model("quality.point"),e.next=7,u.search_read({domain:[["quality_point_type","=",t.typeValue]],fields:["id"]});case 7:return d=e.sent,f=null!==(i=null===d||void 0===d?void 0:d.map((function(t){return t.id})))&&void 0!==i?i:[],e.next=11,l.search_read({domain:[["id","in",c],["point_id","in",f]],fields:["create_date","control_date","default_code","display_name","employee_id","finished_lot_id","id","is_deleted","lot_id","measure","measure_tool","name","norm_unit","point_id","product_id","quality_state","team_id","test_type_id","title","tolerance_max","tolerance_min","user_id","note","is_show"]});case 11:if(p=e.sent,uni.stopPullDownRefresh(),p){e.next=16;break}return t.loadmore="error",e.abrupt("return");case 16:if((null===p||void 0===p?void 0:p.length)>0){for(t.loadmore="more",t.check_state=!0,b={},p.forEach((function(t,e){var i=t.test_type_id[0]+"_type_id";b[i]||(b[i]=[]),b[i].push(t)})),t.check_list=Object.values(b),v={},_=[],t.check_list.forEach((function(e){_=e,_.forEach((function(e){var i=e.title,a=i.replace(/[0-9]/g,""),n=t.mapStandardValue(a),o=t.mapAverageValues(a);v[a]||(v[a]={id:e.test_type_id[0],type_value:e.test_type_id[1],type:a,type_s:n,average_value:o,content:[]}),v[a].content.push(e)}))})),t.category_list=Object.values(v),(g=t.category_list).push.apply(g,(0,o.default)(t.category_list.splice(t.category_list.findIndex((function(t){return"外观"==t.type})),1))),m=t.category_list.findIndex((function(t){return t&&t.content.length>0?"体积"==t.content[0].title:-1})),m>-1&&(y=t.category_list).splice.apply(y,[m+1,0].concat((0,o.default)(t.other_category_list))),t.category_list.forEach((function(e){var i,a=e.content.find((function(t){return t.measure_tool&&"false"!==t.measure_tool[1]})),n=null===a||void 0===a||null===(i=a.measure_tool[1])||void 0===i?void 0:i.match(/\[(.*?)\]\s*(.*)/);a&&n?(t.$set(e,"tool",n[2]),t.$set(e,"code",n[1]),t.$set(e,"measure_id",a.measure_tool[0])):(t.$set(e,"tool",""),t.$set(e,"code",""),t.$set(e,"measure_id",""))})),w=Math.max.apply(Math,(0,o.default)(t.category_list.map((function(t){return t.content.length})))),x=0;x<w;x++){for(k={},S=[],C=0;C<t.category_list.length;C++)k[t.category_list[C].type]=t.category_list[C].content[x]?"Measure"==t.category_list[C].type_value?t.$mHelper.isNumber(t.category_list[C].content[x].measure)&&0!=t.category_list[C].content[x].measure?t.category_list[C].content[x].measure.toFixed(2):t.category_list[C].content[x].is_show?t.category_list[C].content[x].measure:"":(0,h.htmlToText)(t.category_list[C].content[x].note):null,j=k[t.category_list[C].type],"Measure"===t.category_list[C].type_value||null==k[t.category_list[C].type]||k[t.category_list[C].type]||(j=""),S.push((T={},(0,n.default)(T,t.category_list[C].type,j),(0,n.default)(T,"id",t.category_list[C].content[x]?t.category_list[C].content[x].id:null),(0,n.default)(T,"check_id",t.category_list[C].content[x]?t.category_list[C].content[x].check_id:null),(0,n.default)(T,"type",t.category_list[C].type),(0,n.default)(T,"title",t.category_list[C].content[x]?t.category_list[C].content[x].title:null),(0,n.default)(T,"type_value",t.category_list[C].type_value),(0,n.default)(T,"initial_value",j),T));a.push(S)}t.inspection_list=[].concat(a)}else t.check_state=!1;case 17:case"end":return e.stop()}}),e)})))()},autoDoneProduction:function(){var t=this;return(0,l.default)((0,r.default)().mark((function e(){var i;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.default.web.dataset.call_kw({model:"quality.check",method:"auto_done_production",args:[[]],kwargs:{serial:t.search_word}});case 2:i=e.sent,i?t.refresh():(uni.hideLoading(),t.loadmore="nomore");case 4:case"end":return e.stop()}}),e)})))()},mapStandardValue:function(t){var e=this.standard_values.find((function(e){return e.label==="标准"+t}));return(null===e||void 0===e?void 0:e.value)||""},mapAverageValues:function(t){var e=this.average_values.find((function(e){return e.label===t}));return e&&!Number.isNaN(e.value)?Number(e.value).toFixed(2):""},getStandardValues:function(){var t=this;return(0,l.default)((0,r.default)().mark((function e(){var i,a,n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$mStore.dispatch("getIndustryCustomFields");case 3:i=[{label:"标准重量",value:t.production_obj["norm_weight"]},{label:"标准体积",value:t.production_obj["norm_volume"]}],a=t.$mStore.state.industryCustomFields.filter((function(e){var i;return e.cname.includes("norm")&&e.categ_ids.includes((null===(i=t.production_obj.categ_id)||void 0===i?void 0:i.length)>0?t.production_obj.categ_id[0]:null)})),n=t.$mStore.state.industryCustomFields.filter((function(e){var i;return e.pad_type_selection&&e.pad_type_selection.includes("平均值")&&e.categ_ids.includes((null===(i=t.production_obj.categ_id)||void 0===i?void 0:i.length)>0?t.production_obj.categ_id[0]:null)})),t.average_values=n.map((function(e){return{label:e.name,value:t.production_obj[e.cname]}})),t.standard_values=[].concat(i,(0,o.default)(a.map((function(e){return{label:e.name,value:t.production_obj[e.cname]}})))),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},scanClick:function(){return(0,l.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showToast({title:"不支持扫码",icon:"none"});case 1:case"end":return t.stop()}}),t)})))()},getToolList:function(){var t=this;return(0,l.default)((0,r.default)().mark((function e(){var i,a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=s.default.env.model("product.product"),uni.getStorageSync("company_id"),e.next=4,i.search_read({domain:[["tysj_product_type","=","measure_tools"],["department_id","=",3]],fields:["id","display_name"]});case 4:a=e.sent,t.toolList=a||[];case 6:case"end":return e.stop()}}),e)})))()},handleFocus2:function(t,e){this.isEdit&&(this.searchToolFlag=!1,this.eligibleToolFlag=!0,this.editRowIndex=t,this.editingIndex=e)},handleFocus:function(t){var e=this;this.check_name=this.category_list[t],this.eligibleToolFlag=!1,this.toolsLoading=!0,this.searchToolFlag=!0,this.editingIndex=t,this.clearTimer(),this.toolTimer=setTimeout((function(){e.toolsLoading=!1}),300)},closeEligible:function(){this.selectEligible()},selectEligible:function(t){var e=this.inspection_list[this.editRowIndex][this.editingIndex];e&&this.$set(e,[e.type],null!=t?this.eligibleList[t].text:"")},closeTool:function(){this.selectTool()},selectTool:function(t){var e=this.matchToolList[t];if(null!==this.editingIndex){var i,a=this.category_list[this.editingIndex],n=null===e||void 0===e||null===(i=e.display_name)||void 0===i?void 0:i.match(/\[(.*?)\]\s*(.*)/);a&&(n?(this.$set(a,"code",n[1]),this.$set(a,"tool",n[2]),this.$set(a,"measure_id",e.id)):(this.$set(a,"code",""),this.$set(a,"tool",""),this.$set(a,"measure_id","")))}this.searchToolFlag=!1},findMatchingInspection:function(t){for(var e=0;e<this.inspection_list.length;e++){var i=this.inspection_list[e].find((function(e){return e.id===t}));if(i)return i}return null},judgeHanlder:function(t){var e=this,i="",a="";if("success"===t&&(i="合格",a="do_pass"),"warning"===t&&(i="让步放行",a="do_release"),"error"===t&&(i="隔离",a="do_fail"),"zhuan"===t&&(i="转实验流转并补产",a="do_to_experiment"),"fanxiu"===t)return i="返修",a="do_fail",this.repairShow=!0,void uni.showModal({title:"返修原因/说明",content:"请描述返修原因/说明",editable:!0,confirmText:"提交",success:function(t){t.confirm&&e.repairConfirm()}});uni.showModal({content:"是否判定为".concat(i,"？"),success:function(){var t=(0,l.default)((0,r.default)().mark((function t(i){var n,o,c;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.confirm){e.submitLoading=!0;try{"mrp.production",n=e.production_obj.id,o=[n],c={},s.default.web.dataset.call_kw({model:"mrp.production",method:a,args:o,kwargs:c}).then(function(){var t=(0,l.default)((0,r.default)().mark((function t(i){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.uToast.show({title:"提交成功",type:"success"}),e.removeHanlde(e.paginationIndex);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){200==t.code&&uni.showToast({title:t.data.message,icon:"error"})})).finally((function(){e.submitLoading=!1}))}catch(i){console.error(i)}}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},repairClose:function(){this.repairShow=!1,this.repairDec=""},repairConfirm:function(){var t=this;if(!this.repairDec)return this.$refs.repairPopup.clearLoading(),void uni.showToast({title:"请填写返修原因/建议",icon:"none"});try{var e=this.production_obj.id,i=[e,e,this.repairDec];s.default.web.dataset.call_kw({model:"mrp.production",method:"button_repair",args:i,kwargs:{}}).then(function(){var e=(0,l.default)((0,r.default)().mark((function e(i){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===i||void 0===i||!i.error){e.next=2;break}return e.abrupt("return");case 2:return t.$refs.uToast.show({title:"提交成功",type:"success"}),t.repairClose(),e.next=6,t.getProductionInfo();case 6:t.showCheckResult();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){200==t.code&&uni.showToast({title:t.data.message,icon:"error"})})).finally((function(){t.$refs.repairPopup.clearLoading()}))}catch(a){console.error(a)}},submit_jishu:function(){var t=this;uni.showModal({content:"是否提交技术判定？",success:function(){var e=(0,l.default)((0,r.default)().mark((function e(i){var a,n,o;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.confirm){t.submitLoading=!0;try{"mrp.production",a=t.production_obj.id,n=[a],o={},s.default.web.dataset.call_kw({model:"mrp.production",method:"do_to_decide",args:n,kwargs:o}).then((function(e){t.$refs.uToast.show({title:"提交成功",type:"success"})})).catch((function(t){200==t.code&&uni.showToast({title:t.data.message,icon:"error"})})).finally((function(){t.submitLoading=!1}))}catch(i){console.error(i)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},resetCheck:function(){var t=this;this.resetCheckLoading=!0;var e=this.production_obj.id,i=[e];s.default.web.dataset.call_kw({model:"mrp.production",method:"reset_check",args:i,kwargs:{}}).then((0,l.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.refresh();case 2:t.resetCheckLoading=!1;case 3:case"end":return e.stop()}}),e)})))).catch((function(){t.resetCheckLoading=!1}))},inspectionConfirm:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(){var a=(0,l.default)((0,r.default)().mark((function a(){var n,o,l,c,u,d;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.inspection_list.flat().filter((function(t){return null!=t.id})),o=[{production_id:t.production_obj.id,check_data:n.map((function(t){return{check_id:t.id,test_type:t.type_value,value:t[t.type]}}))}],a.prev=2,a.next=5,s.default.web.dataset.call_kw({model:"mrp.production",method:"yiqichengpinjian",args:[[]],kwargs:{data:o,is_zancun:i?0:1,check_inspector:"",check_type:t.production_obj.check_type}});case 5:l=a.sent,l&&(e&&t.$refs.uToast.show({title:i?"提交成功":"保存成功",type:"success"}),i&&(c=t.production_obj.id,u=[c],d={},s.default.web.dataset.call_kw({model:"mrp.production",method:"update_check_date",args:u,kwargs:d}),t.refresh())),uni.hideLoading(),t.submitLoading=!1,t.saveLoading=!1,a.next=19;break;case 12:a.prev=12,a.t0=a["catch"](2),console.log(a.t0),uni.showToast({title:"提交失败，请重新提交",icon:"none"}),uni.hideLoading(),t.submitLoading=!1,t.saveLoading=!1;case 19:case"end":return a.stop()}}),a,null,[[2,12]])})));return function(){return a.apply(this,arguments)}}();i?uni.showModal({content:"是否确认提交？",success:function(){var e=(0,l.default)((0,r.default)().mark((function e(i){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.confirm&&(uni.showLoading({title:"提交中",mask:!0}),t.submitLoading=!0,a());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):(this.saveLoading=!0,a())},inspectionConfirm2:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.saveLoading=!0,new Promise((function(i,a){t.clearTimer(),t.saveTimer=setTimeout((function(){var o=s.default.env.model("quality.check"),r=s.default.env.model("mrp.production"),l=[];t.category_list.forEach((function(e){e.content.forEach((function(i){var a=t.findMatchingInspection(i.id);if(a){l.push((function(){return new Promise((function(l,c){var s=a[a["type"]],d=["密度"].indexOf(i.title)>-1;if(d){r.write(t.production_obj.id,(0,n.default)({write_uid:[uni.getStorageSync("currentUser").uuid,uni.getStorageSync("currentUser").name],write_date:(0,u.default)().format("YYYY-MM-DD HH:mm:ss")},"density",s)).then((function(t){l({result:t,title:i.title,id:i.id})}),(function(t){c({result:t,title:i.title,id:i.id})}))}else{var f,p=(null===(f=i.test_type_id)||void 0===f?void 0:f.length)>1&&"Measure"==i.test_type_id[1]?"measure":"note";o.write(i.id,(0,n.default)({write_uid:[uni.getStorageSync("currentUser").uuid,uni.getStorageSync("currentUser").name],write_date:(0,u.default)().format("YYYY-MM-DD HH:mm:ss"),measure_tool:e.measure_id},p,"measure"===p?s-0:s)).then((function(t){l({result:t,title:i.title,id:i.id})}),(function(t){c({result:t,title:i.title,id:i.id})}))}}))}))}}))})),Promise.all(l.map((function(t){return t()}))).then((function(a){var n=a.length>0?a.findIndex((function(t){return!0!==t.result})):-1;if(n>-1)throw Error(a[n]);t.isSave=!0,e&&t.$refs.uToast.show({title:"保存成功",type:"success"}),i(a)})).catch((function(e){t.$refs.uToast.show({title:"检验数据保存失败, 请检查网络或联系技术人员处理",type:"error",duration:3e3}),a(e)})).finally((function(){t.saveLoading=!1}))}),500)}))},inspectionSubmmit:function(){var t=this;uni.showModal({content:"是否确认提交？",success:function(){var e=(0,l.default)((0,r.default)().mark((function e(i){var a,n,o,c;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i.confirm){e.next=19;break}return uni.showLoading({title:"提交中",mask:!0}),t.submitLoading=!0,e.prev=3,e.next=6,t.inspectionConfirm(!1);case 6:a=s.default.env.model("mrp.production"),a.write(t.production_obj.id,{check_type:t.production_obj.check_type}),"mrp.production","get_result",n=t.production_obj.id,o=[n],c={},s.default.web.dataset.call_kw({model:"mrp.production",method:"get_result",args:o,kwargs:c}).then(function(){var e=(0,l.default)((0,r.default)().mark((function e(i){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i&&(uni.showToast({title:"提交成功",icon:"none"}),s.default.web.dataset.call_kw({model:"mrp.production",method:"update_check_date",args:o,kwargs:c}),t.refresh());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){200==t.code&&uni.showToast({title:t.data.message,icon:"error"})})).finally((function(){t.submitLoading=!1})),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](3),t.submitLoading=!1;case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}()})},showCheckResult:function(){this.isConfirmButtonShow=!1},removeHanlde:function(t){this.pagination_ids.splice(t,1),t<=0?this.paginationIndex=0:t>=this.pagination_ids.length?this.paginationIndex=this.pagination_ids.length:this.paginationIndex=this.paginationIndex+1,this.refresh(!0,this.pagination_ids[this.paginationIndex])},prevHandle:function(t){t<=0||(this.paginationIndex=this.paginationIndex-1,this.refresh(!1,this.pagination_ids[this.paginationIndex]))},nextHandle:function(t){t>=this.pagination_ids.length||(this.paginationIndex=this.paginationIndex+1,this.refresh(!1,this.pagination_ids[this.paginationIndex]))},refresh:function(t,e){var i=this;return(0,l.default)((0,r.default)().mark((function a(){return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t?i.loadmore="loadmore":uni.showLoading({mask:!0}),a.next=4,i.getProductionInfo(e);case 4:return a.next=6,i.getStandardValues();case 6:return i.getOtherInfo(),a.next=9,i.getCheckList();case 9:if(i.production_state&&i.check_state){a.next=12;break}return i.autoDoneProduction(),a.abrupt("return");case 12:uni.hideLoading(),i.production_obj.check_result&&i.showCheckResult(),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),uni.hideLoading();case 19:case"end":return a.stop()}}),a,null,[[0,16]])})))()},onKeyboardHeightChange:function(t){var e=t.height;this.iskeyOpen=e>0},clearTimer:function(){this.toolTimer&&(clearTimeout(this.toolTimer),this.toolTimer=null),this.saveTimer&&(clearTimeout(this.saveTimer),this.saveTimer=null)}},onLoad:function(t){var e=this;return(0,l.default)((0,r.default)().mark((function i(){var a;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a={},e.typeValue=t.typeValue||"",e.workshop=t.workshop||"","params"in t&&(a=JSON.parse(decodeURIComponent(t.params))),e.initData(a);case 5:case"end":return i.stop()}}),i)})))()},onUnload:function(){uni.offKeyboardHeightChange(this.onKeyboardHeightChange),this.clearTimer()},beforeDestroy:function(){this.saveTimer&&clearTimeout(this.saveTimer),this.toolTimer&&clearTimeout(this.toolTimer),this.submitTimer&&clearTimeout(this.submitTimer)},onNavigationBarButtonTap:function(t){0===t.index&&this.refresh(!0)},onBackPress:function(){if(!this.isBack&&!this.isJISHU)return uni.showModal({title:"是否退出当前页面？",confirmText:"退出",success:function(t){t.confirm&&(this.isBack=!0,uni.navigateBack())}.bind(this)}),!0},onPullDownRefresh:function(){this.refresh(!0)}};e.default=g},ec68:function(t,e,i){"use strict";i.r(e);var a=i("8a06"),n=i("2a9d");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("cfe0");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"681c45f4",null,!1,a["a"],void 0);e["default"]=l.exports},f18a:function(t,e,i){"use strict";var a=i("1cb5");a("flat")},f66b:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */[data-v-681c45f4]:export{baseColor:#6190e8;primary_color:#6190e8;uni_bg:#fff;uni_bg_dark:#12183d;uni_bg_dark_light:#262b54}.u-cell[data-v-681c45f4]{display:flex;flex-direction:row;align-items:center;position:relative;box-sizing:border-box;width:100%;padding:%?26?% %?32?%;font-size:%?28?%;line-height:%?54?%;color:#606266;background-color:#fff;text-align:left}.u-cell_title[data-v-681c45f4]{font-size:%?28?%}.u-cell__left-icon-wrap[data-v-681c45f4]{margin-right:%?10?%;font-size:%?32?%}.u-cell__right-icon-wrap[data-v-681c45f4]{margin-left:%?10?%;color:#969799;font-size:%?28?%}.u-cell__left-icon-wrap[data-v-681c45f4],\n.u-cell__right-icon-wrap[data-v-681c45f4]{display:flex;flex-direction:row;align-items:center;height:%?48?%}.u-cell-border[data-v-681c45f4]:after{position:absolute;box-sizing:border-box;content:" ";pointer-events:none;border-bottom:1px solid #e4e7ed;right:0;left:0;top:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.u-cell-border[data-v-681c45f4]{position:relative}.u-cell__label[data-v-681c45f4]{margin-top:%?6?%;font-size:%?26?%;line-height:%?36?%;color:#909399;word-wrap:break-word}.u-cell__value[data-v-681c45f4]{overflow:hidden;text-align:right;vertical-align:middle;color:#909399;font-size:%?26?%}.u-cell__title[data-v-681c45f4],\n.u-cell__value[data-v-681c45f4]{flex:1}.u-cell--required[data-v-681c45f4]{overflow:visible;display:flex;flex-direction:row;align-items:center}.u-cell--required[data-v-681c45f4]:before{position:absolute;content:"*";left:8px;margin-top:%?4?%;font-size:14px;color:#ea5455}.u-cell_right[data-v-681c45f4]{line-height:1}',""]),t.exports=e}}]);