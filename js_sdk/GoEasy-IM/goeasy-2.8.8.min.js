!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).GoEasy=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})})),e}var o={},r={},i={},s={exports:{}};!function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<o.length;r++)if((n=o[r])===e||n.fn===e){o.splice(r,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(s),i.__esModule=!0,i.EmitterEventDriver=void 0;var a=s.exports,c=function(){function t(){this.emitter=new a}return t.prototype.on=function(t,e){return this.emitter.on(t,e),this},t.prototype.once=function(t,e){return this.emitter.once(t,e),this},t.prototype.off=function(t,e){return this.emitter.off(t,e),this},t.prototype.fire=function(t,e){return this.emitter.emit(t,e),this},t}();i.EmitterEventDriver=c,r.__esModule=!0,r.GoEasyEventCenter=void 0;var u=i,p=function(){function t(){}return t.initial=function(){this.eventDriver=new u.EmitterEventDriver},t.on=function(t,e){this.eventDriver.on(t,e)},t.off=function(t,e){this.eventDriver.off(t,e)},t.once=function(t,e){this.eventDriver.once(t,e)},t.fire=function(t,e){this.eventDriver.fire(t,e)},t}();r.GoEasyEventCenter=p;var f={};function l(){l=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(r||[]);return o(s,"_invoke",{value:w(t,n,a)}),s}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function d(){}function y(){}var m={};c(m,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==e&&n.call(v,i)&&(m=v);var b=y.prototype=h.prototype=Object.create(m);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,s,a){var c=p(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function w(t,e,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return P()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=p(t,e,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function _(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=p(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},S(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var s=new E(u(e,n,o,r),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(b),c(b,a,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e,n,o,r,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,r)}var y={},m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},m(t,e)};var g=function(){return g=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},g.apply(this,arguments)};var v=Object.create?function(t,e,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]};function b(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function E(t){return this instanceof E?(this.v=t,this):new E(t)}var w=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var _=Object.freeze({__proto__:null,__extends:function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},get __assign(){return g},__rest:function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},__decorate:function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},__param:function(t,e){return function(n,o){e(n,o,t)}},__esDecorate:function(t,e,n,o,r,i){function s(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,c=o.kind,u="getter"===c?"get":"setter"===c?"set":"value",p=!e&&t?o.static?t:t.prototype:null,f=e||(p?Object.getOwnPropertyDescriptor(p,o.name):{}),l=!1,d=n.length-1;d>=0;d--){var y={};for(var m in o)y[m]="access"===m?{}:o[m];for(var m in o.access)y.access[m]=o.access[m];y.addInitializer=function(t){if(l)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(t||null))};var g=(0,n[d])("accessor"===c?{get:f.get,set:f.set}:f[u],y);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!==h(g))throw new TypeError("Object expected");(a=s(g.get))&&(f.get=a),(a=s(g.set))&&(f.set=a),(a=s(g.init))&&r.push(a)}else(a=s(g))&&("field"===c?r.push(a):f[u]=a)}p&&Object.defineProperty(p,o.name,f),l=!0},__runInitializers:function(t,e,n){for(var o=arguments.length>2,r=0;r<e.length;r++)n=o?e[r].call(t,n):e[r].call(t);return o?n:void 0},__propKey:function(t){return"symbol"===h(t)?t:"".concat(t)},__setFunctionName:function(t,e,n){return"symbol"===h(e)&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})},__metadata:function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))},__generator:function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},__createBinding:v,__exportStar:function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||v(e,t,n)},__values:b,__read:S,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(S(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,r++)o[r]=i[s];return o},__spreadArray:function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},__await:E,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){r[t]&&(o[t]=function(e){return new Promise((function(n,o){i.push([t,e,n,o])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof E?Promise.resolve(n.value.v).then(c,u):p(i[0][2],n)}catch(t){p(i[0][3],t)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function p(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}},__asyncDelegator:function(t){var e,n;return e={},o("next"),o("throw",(function(t){throw t})),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,r){e[o]=t[o]?function(e){return(n=!n)?{value:E(t[o](e)),done:!1}:r?r(e):e}:r}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=b(t),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(n){e[n]=t[n]&&function(e){return new Promise((function(o,r){(function(t,e,n,o){Promise.resolve(o).then((function(e){t({value:e,done:n})}),e)})(o,r,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&v(e,t,n);return w(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)},__classPrivateFieldSet:function(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n},__classPrivateFieldIn:function(t,e){if(null===e||"object"!==h(e)&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}}),C=n(_),N={};!function(t){t.__esModule=!0,t.PlatformDetector=t.Platform=void 0;var e,n=C;!function(t){t.BROWSER="BROWSER",t.UNKNOWN="UNKNOWN",t.APP_IOS="APP_IOS",t.APP_ANDROID="APP_ANDROID",t.APPLET_WX="APPLET_WX",t.APPLET_WX_GAME="APPLET_WX_GAME",t.APPLET_ALIPAY="APPLET_ALIPAY",t.APPLET_BYTEDANCE="APPLET_BYTEDANCE"}(e=t.Platform||(t.Platform={}));var o=function(){function t(){var t,o,r;this.platform=null,this.methods=((t={})[e.BROWSER]=this.isBrowser,t[e.APP_IOS]=this.isAppiOS,t[e.APP_ANDROID]=this.isAppAndroid,t[e.APPLET_WX]=this.isWXApplet,t[e.APPLET_WX_GAME]=this.isWXGameApplet,t);var i=this.methods,s=Object.keys(i);try{for(var a=n.__values(s),c=a.next();!c.done;c=a.next()){var u=c.value;if((0,i[u])()){this.platform=u;break}}}catch(t){o={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}this.platform=this.platform||e.UNKNOWN,this.platform}return t.currentPlatform=function(){return t.instance.platform},t.prototype.isBrowser=function(){return"undefined"!=typeof navigator&&"Taro"!==navigator.product&&"ReactNative"!==navigator.product&&"undefined"==typeof GameGlobal&&("undefined"==typeof cc||null!==cc.sys.browserType)},t.prototype.isAppiOS=function(){return"undefined"!=typeof cc&&cc.sys.isNative&&cc.sys.isMobile&&"iOS"===cc.sys.os||"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync&&"ios"===uni.getSystemInfoSync().platform&&"object"===("undefined"==typeof plus?"undefined":h(plus))},t.prototype.isAppAndroid=function(){return"undefined"!=typeof cc&&cc.sys.isNative&&cc.sys.isMobile&&"Android"===cc.sys.os||"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync&&"android"===uni.getSystemInfoSync().platform&&"object"===("undefined"==typeof plus?"undefined":h(plus))},t.prototype.isWXApplet=function(){return"object"===("undefined"==typeof wx?"undefined":h(wx))&&!!wx.getSystemInfoSync&&"undefined"==typeof WebSocket&&"undefined"==typeof XMLHttpRequest&&"undefined"==typeof plus},t.prototype.isWXGameApplet=function(){return"object"===("undefined"==typeof GameGlobal?"undefined":h(GameGlobal))},t.prototype.isAlipayApplet=function(){return!1},t.prototype.isBytedanceApplet=function(){return!1},t.prototype.isQQApplet=function(){return!1},t.prototype.isBaiduApplet=function(){return!1},t.instance=new t,t}();t.PlatformDetector=o}(N),function(e){e.__esModule=!0,e.FrameworkDetector=e.Framework=void 0;var n,o=C,r=N;!function(t){t.UNIAPP="UNIAPP",t.REACT_NATIVE="REACT_NATIVE",t.COCOS="COCOS",t.TARO="TARO",t.IONIC="IONIC",t.NATIVE_APPLET_WX="NATIVE_APPLET_WX",t.NATIVE_APPLET_ALIPAY="NATIVE_APPLET_ALIPAY",t.UNKNOWN="UNKNOWN"}(n=e.Framework||(e.Framework={}));var i=function(){function e(){var t,e,r;this.framework=null,this.methods=((t={})[n.UNIAPP]=this.isUniApp,t[n.REACT_NATIVE]=this.isReactNative,t[n.TARO]=this.isTaro,t[n.NATIVE_APPLET_WX]=this.isWXApplet,t[n.COCOS]=this.isCocos,t);var i=this.methods,s=Object.keys(i);try{for(var a=o.__values(s),c=a.next();!c.done;c=a.next()){var u=c.value;if((0,i[u])()){this.framework=u;break}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}this.framework=this.framework||n.UNKNOWN,this.framework}return e.currentFramework=function(){return this.instance.framework},e.prototype.isUniApp=function(){return"object"===("undefined"==typeof uni?"undefined":h(uni))&&!!uni.getSystemInfoSync},e.prototype.isReactNative=function(){return void 0!==t&&t.__fbGenNativeModule},e.prototype.isTaro=function(){return"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.TARO_ENV},e.prototype.isWXApplet=function(){return r.PlatformDetector.currentPlatform()===r.Platform.APPLET_WX&&"undefined"==typeof uni},e.prototype.isCocos=function(){try{return void 0!==cc.sys.localStorage}catch(t){return!1}},e.instance=new e,e}();e.FrameworkDetector=i}(y),f.__esModule=!0,f.RNPlugins=void 0;var k=y,T=function(){function t(){}return t.init=function(t){k.FrameworkDetector.currentFramework()===k.Framework.REACT_NATIVE&&(this.validate(t),this.platform=t.platform,this.asyncStorage=t.asyncStorage)},t.validate=function(t){if(!t)throw new Error("'reactNativeOptions' is missing when calling GoEasy.getInstance()");if(!t.platform)throw new Error("'platform' is missing in GoEasy 'reactNativeOptions'");if(!t.asyncStorage)throw new Error("'asyncStorage' is missing in GoEasy 'reactNativeOptions'")},t}();f.RNPlugins=T;var P={};!function(t){t.__esModule=!0,t.NetworkStatus=void 0,function(t){t.DISCONNECTED="disconnected",t.DISCONNECTING="disconnecting",t.CONNECTING="connecting",t.CONNECTED="connected",t.RECONNECTING="reconnecting",t.RECONNECTED="reconnected",t.EXPIRED_RECONNECTED="reconnected",t.CONNECT_FAILED="connect_failed"}(t.NetworkStatus||(t.NetworkStatus={}))}(P);var O={},A={__esModule:!0,ModuleTypes:void 0};A.ModuleTypes={IM:"IM",PUBSUB:"PUBSUB"};var R={__esModule:!0,Emitter:void 0},I=P,x=function(){function t(t){this.rocketsBuffer=new Set,this.socket=t,this.socket.addConnectedObserver(this.onSocketConnected.bind(this))}return t.prototype.emit=function(t){this.socket.status!==I.NetworkStatus.DISCONNECTED?(t.start(),this.doEmit(t)):t.fail({resultCode:"409",content:"Please connect first"})},t.prototype.doEmit=function(t){var e=this;if(!t.complete)if(this.socket.status!==I.NetworkStatus.CONNECT_FAILED)if(this.isConnected())if(this.hasPermission(t)){var n=setTimeout((function(){e.doEmit(t)}),t.singleTimeout);t.unique&&(t.params.retried=t.retried),this.socket.socketio().emit(t.name,t.params,(function(e){clearTimeout(n),200===e.resultCode||200==e.code?t.success(e):t.fail(e)})),t.retried++}else t.fail({resultCode:401,content:"No permission"});else this.isConnecting()&&this.rocketsBuffer.add(t);else t.fail({resultCode:408,content:"Failed to connect GoEasy."})},t.prototype.hasPermission=function(t){return!!this.socket.permissions.find((function(e){return e===t.permission}))},t.prototype.isConnected=function(){return[I.NetworkStatus.CONNECTED,I.NetworkStatus.RECONNECTED,I.NetworkStatus.EXPIRED_RECONNECTED].includes(this.socket.status)},t.prototype.isConnecting=function(){return[I.NetworkStatus.CONNECTING,I.NetworkStatus.RECONNECTING].includes(this.socket.status)},t.prototype.onSocketConnected=function(){this.emitBuffer()},t.prototype.emitBuffer=function(){var t=this;Array.from(this.rocketsBuffer).forEach((function(e){t.rocketsBuffer.delete(e),t.doEmit(e)}))},t}();R.Emitter=x,O.__esModule=!0,O.G=void 0;var M=A,D=R,B=function(){function t(){}return t.i=function(t){this.socket=t,this.emitter=new D.Emitter(t)},t.s=function(){if(this.socket)return this.socket;throw new Error("Please connect first.")},t.e=function(t){this.emitter.emit(t)},t.u=function(){return this.s().userId},t.ud=function(){return this.s().connectOptions.data},t.supportIM=function(){return this.s().options.modules.includes(M.ModuleTypes.IM)},t}();O.G=B;var F={},L={};!function(t){t.__esModule=!0;var e=new(function(){function t(){}return t.prototype.isDef=function(t){return!this.isUndef(t)},t.prototype.isUndef=function(t){return null==t},t.prototype.isPrimitive=function(t){return"string"==typeof t||"number"==typeof t||"symbol"===h(t)||"boolean"==typeof t},t.prototype.isObject=function(t){return null!==t&&"object"===h(t)},t.prototype.isPlainObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.prototype.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},t.prototype.isValidArrayIndex=function(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)},t.prototype.isString=function(t){return"string"==typeof t},t.prototype.isNumber=function(t){return"number"==typeof t},t.prototype.isStringOrNumber=function(t){return this.isString(t)||this.isNumber(t)},t.prototype.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isEmpty=function(t){return this.isArray(t)?0===t.length:this.isObject(t)?!this.isDef(t):!this.isNumber(t)&&(this.isString(t)?""===t.trim():!this.isDef(t))},t.prototype.isNative=function(t){return"function"==typeof t&&/native code/.test(t.toString())},t.prototype.isFunction=function(t){return"function"==typeof t},t.prototype.isBoolean=function(t){return"boolean"==typeof t},t.prototype.isTrue=function(t){return!0===t},t.prototype.isFalse=function(t){return!1===t},t.prototype.isNull=function(t){return null===t},t}());t.default=e}(L);var j={__esModule:!0,uniApp:void 0},G=y,U=new(function(){function t(){this.uniAppRunningBackend=!1,this.listenAppRunning()}return t.prototype.listenAppRunning=function(){var t=this;G.FrameworkDetector.currentFramework()===G.Framework.UNIAPP&&"object"===("undefined"==typeof plus?"undefined":h(plus))&&(plus.globalEvent.addEventListener("resume",(function(){t.uniAppRunningBackend=!1,t.uniAppRunningBackend}),!1),plus.globalEvent.addEventListener("pause",(function(){t.uniAppRunningBackend=!0,t.uniAppRunningBackend}),!1))},t.prototype.runningBackend=function(){return this.uniAppRunningBackend},t}());j.uniApp=U;var q={},W={},V={exports:{}},z="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(z){var X=new Uint8Array(16);V.exports=function(){return z(X),X}}else{var H=new Array(16);V.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),H[e]=t>>>((3&e)<<3)&255;return H}}for(var K=[],Y=0;Y<256;++Y)K[Y]=(Y+256).toString(16).substr(1);var J,Q,$=function(t,e){var n=e||0,o=K;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")},Z=V.exports,et=$,nt=0,ot=0;var rt=function(t,e,n){var o=e&&n||0,r=e||[],i=(t=t||{}).node||J,s=void 0!==t.clockseq?t.clockseq:Q;if(null==i||null==s){var a=Z();null==i&&(i=J=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=Q=16383&(a[6]<<8|a[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:ot+1,p=c-nt+(u-ot)/1e4;if(p<0&&void 0===t.clockseq&&(s=s+1&16383),(p<0||c>nt)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");nt=c,ot=u,Q=s;var f=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;r[o++]=f>>>24&255,r[o++]=f>>>16&255,r[o++]=f>>>8&255,r[o++]=255&f;var l=c/4294967296*1e4&268435455;r[o++]=l>>>8&255,r[o++]=255&l,r[o++]=l>>>24&15|16,r[o++]=l>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var h=0;h<6;++h)r[o+h]=i[h];return e||et(r)},it=V.exports,st=$;var at=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||it)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var i=0;i<16;++i)e[o+i]=r[i];return e||st(r)},ct=rt,ut=at,pt=ut;pt.v1=ct,pt.v4=ut;var ft=pt;!function(t){t.__esModule=!0;var e=ft,n=function(){function t(){}return t.get=function(){return e.v1().replace(/-/g,"")},t}();t.default=n}(W);var lt={};!function(t){t.__esModule=!0,t.Permission=void 0,function(t){t.WRITE="WRITE",t.READ="READ",t.NONE="NONE"}(t.Permission||(t.Permission={}))}(lt),function(t){t.__esModule=!0;var e=W,n=lt,o=function(){function t(t){var o=this;this.permission=n.Permission.NONE,this.singleTimeout=0,this.totalTimeout=0,this.startTime=0,this.complete=!1,this.retried=0,this.unique=!1,this.uuid=e.default.get(),this.name=t.name,this.params=t.params,this.permission=t.permission,this.totalTimeout=t.totalTimeout,this.singleTimeout=t.singleTimeout,t.unique&&(this.unique=t.unique),this.success=function(e){o.complete||(o.end(),t.success(e))},this.fail=function(e){o.complete||(o.end(),t.fail(e))}}return t.prototype.start=function(){this.startTime=Date.now(),this.initAutoTimeout()},t.prototype.end=function(){this.complete=!0,clearTimeout(this.timeoutHandler)},t.prototype.initAutoTimeout=function(){var t=this;this.timeoutHandler=setTimeout((function(){t.complete||t.fail({resultCode:408,content:"Host unreachable or timeout"})}),this.totalTimeout)},t}();t.default=o}(q);var ht={};!function(t){t.__esModule=!0,t.RocketTypes=void 0,function(t){t.authorize="authorize",t.manualDisconnect="manualDisconnect",t.subscribe="subscribe",t.unsubscribe="unsubscribe",t.publish="publish",t.ack="ack",t.historyMessages="historyMessages",t.hereNow="hereNow",t.hereNowByUserIds="hereNowByUserIds",t.PUBSUB_PRESENCE_SUBSCRIBE="PUBSUB_PRESENCE_SUBSCRIBE",t.PUBSUB_PRESENCE_UNSUBSCRIBE="PUBSUB_PRESENCE_UNSUBSCRIBE",t.PUBSUB_PRESENCE_HERENOW="PUBSUB_PRESENCE_HERENOW",t.imLastConversations="imLastConversations",t.markPrivateMessageAsRead="markPrivateMessageAsRead",t.markGroupMessageAsRead="markGroupMessageAsRead",t.imGroupOnlineCount="imGroupOnlineCount",t.imHereNow="imHereNow",t.imGroupHereNow="imGroupHereNow",t.publishIM="publishIM",t.subscribeUserPresence="subscribeUserPresence",t.unsubscribeUserPresence="unsubscribeUserPresence",t.subscribeGroupPresence="subscribeGroupPresence",t.unsubscribeGroupPresence="unsubscribeGroupPresence",t.removeConversation="removeConversation",t.topConversation="topConversation",t.imData="imData",t.subscribeGroups="subscribeGroups",t.unsubscribeGroup="unsubscribeGroup",t.IM_DELETE_MESSAGE="IM_DELETE_MESSAGE",t.IM_HISTORY="IM_HISTORY",t.IM_HISTORY_CHANGE="IM_HISTORY_CHANGE",t.IM_RECALL_MESSAGE="IM_RECALL_MESSAGE",t.IM_MARK_AS_READ="IM_MARK_AS_READ",t.RTC_ASK_NEW_TOKEN="RTC_ASK_NEW_TOKEN",t.RTC_DIAL="RTC_DIAL",t.RTC_ACCEPT="RTC_ACCEPT",t.RTC_ACCEPT_FAILED="RTC_ACCEPT_FAILED",t.RTC_MANUAL_END="RTC_MANUAL_END",t.RTC_CLIENT_BUSY="RTC_CLIENT_BUSY",t.RTC_TIMEOUT="RTC_TIMEOUT",t.RTC_CALL_DATA="RTC_CALL_DATA",t.CS_PENDING_CONVERSATION="CS_PENDING_CONVERSATION",t.CS_ACCEPT="CS_ACCEPT",t.CS_END="CS_END",t.CS_TRANSFER="CS_TRANSFER",t.CS_AGENTS="CS_AGENTS",t.CS_CUSTOMER_STATUS="CS_CUSTOMER_STATUS",t.CS_MY_TEAMS="CS_MY_TEAMS",t.CS_ONLINE="CS_ONLINE",t.CS_OFFLINE="CS_OFFLINE",t.CS_LIVE_SESSION="CS_LIVE_SESSION",t.CS_QUIT_LIVE="CS_QUIT_LIVE",t.SET_IOS_BADGE="SET_IOS_BADGE"}(t.RocketTypes||(t.RocketTypes={}))}(ht);var dt={};!function(t){t.__esModule=!0,t.SocketTimeout=void 0,function(t){t[t.connect=3e3]="connect",t[t.reconnectionDelayMax=3e3]="reconnectionDelayMax",t[t.commonQuerySingle=2500]="commonQuerySingle",t[t.commonQueryTotal=12e3]="commonQueryTotal",t[t.commonRequestSingle=1700]="commonRequestSingle",t[t.commonRequestTotal=12e3]="commonRequestTotal",t[t.commonInfiniteSingle=1700]="commonInfiniteSingle",t[t.commonInfiniteTotal=864e5]="commonInfiniteTotal"}(t.SocketTimeout||(t.SocketTimeout={}))}(dt);var yt={__esModule:!0,CallbackUtils:void 0},mt=L,gt=function(){function t(){}return t.onSuccess=function(t,e){mt.default.isFunction(t.onSuccess)&&t.onSuccess(e)},t.onFailed=function(t,e){if(!mt.default.isObject(t)||!mt.default.isFunction(t.onFailed))throw e;t.onFailed(e)},t}();yt.CallbackUtils=gt,F.__esModule=!0,F.GNS=void 0;var vt=L,bt=y,St=N,Et=j,wt=q,_t=ht,Ct=dt,Nt=lt,kt=O,Tt=yt,Pt=function(){function t(t){this.uniappPlugin=null,this.regIdPromise=null,this.onClickNotificationCallback=null,this.payloadAssemblers=new Array,this.allowNotification=t,this.supportNotification()&&(this.uniappPlugin=uni.requireNativePlugin("GoEasy-Uniapp"),this.uniappPlugin?this.regIdPromise=this.askRegId():console.warn("No GoEasy-Uniapp Native Plugin."))}return t.init=function(e){this.instance=new t(e),this.instance.supportNotification()&&this.instance.setClientBadge(0)},t.prototype.addAssembler=function(t){this.payloadAssemblers.push(t)},t.prototype.assemblePayload=function(t){var e=this.payloadAssemblers.find((function(e){return e.support(t)}));return e?e.assemble(t):t},t.prototype.createLocalNotification=function(e,n,o,r,i){Et.uniApp.runningBackend()&&(o.g=1,"undefined"!=typeof plus&&(r?(this.uniappPlugin.playSound(r),plus.push.createMessage(n,JSON.stringify(o),{title:e,sound:"none"})):plus.push.createMessage(n,JSON.stringify(o),{title:e}),"+1"===i&&this.setClientBadge(t.instance.badge+1)))},t.prototype.setBadge=function(t){var e=this;if(!Number.isInteger(t.badge)||t.badge<0)Tt.CallbackUtils.onFailed(t,"badge must be an integer greater than or equal to 0.");else if(this.supportNotification())if(St.PlatformDetector.currentPlatform()===St.Platform.APP_IOS){var n=new wt.default({name:_t.RocketTypes.SET_IOS_BADGE,params:{badge:t.badge},unique:!0,singleTimeout:Ct.SocketTimeout.commonRequestSingle,totalTimeout:Ct.SocketTimeout.commonRequestTotal,permission:Nt.Permission.WRITE,success:function(){Tt.CallbackUtils.onSuccess(t),e.setClientBadge(t.badge)},fail:function(e){Tt.CallbackUtils.onFailed(t,e.content)}});kt.G.e(n)}else Tt.CallbackUtils.onSuccess(t),this.setClientBadge(t.badge)},t.prototype.setClientBadge=function(e){"vivo"!==plus.device.vendor&&(t.instance.badge=e,plus.runtime.setBadgeNumber(e))},t.prototype.askRegId=function(){var t=this,e=null,n=0,o=function o(){return new Promise((function(r,i){t.uniappPlugin.regId((function(t){r(t)}),(function(r){if(!(1e6===r.data.code&&n<=10))return clearTimeout(e),i(r);e=setTimeout((function(){n++,t.regIdPromise=o()}),3500)}))}))}();return o},t.prototype.getRegIdPromise=function(){return this.regIdPromise},t.prototype.supportNotification=function(){var t=St.PlatformDetector.currentPlatform(),e=bt.FrameworkDetector.currentFramework();return this.allowNotification&&e===bt.Framework.UNIAPP&&(t===St.Platform.APP_ANDROID||t===St.Platform.APP_IOS)},t.prototype.listenPlusClickNotification=function(){var t=this;plus.push.addEventListener("click",(function(e){try{if(e){var n="string"==typeof e.payload?JSON.parse(e.payload):e.payload;if(t.availableIntent(n)){var o=t.assemblePayload(n);plus.push.clear(),t.onClickNotificationCallback(o)}}}catch(t){}}))},t.prototype.availableIntent=function(t){return t&&Object.keys(t).length&&t.g&&1===parseInt(t.g)},t.prototype.getIntentData=function(){var t=this;this.uniappPlugin.getIntentData((function(e){if(t.availableIntent(e)){var n=t.assemblePayload(e),o=St.PlatformDetector.currentPlatform();plus.push.clear(),o===St.Platform.APP_ANDROID&&t.uniappPlugin.clearAll(),t.onClickNotificationCallback(n)}}))},t.prototype.listenClick=function(){this.listenPlusClickNotification();var t=St.PlatformDetector.currentPlatform();this.uniappPlugin&&t===St.Platform.APP_ANDROID&&this.getIntentData()},t.prototype.onClickNotification=function(t){if(this.supportNotification()){if(!vt.default.isFunction(t))throw new Error("The arguments must be a function.");null===this.onClickNotificationCallback?(this.onClickNotificationCallback=t,this.listenClick()):console.warn("The onClickNotification event has been listened on. Please do not listen to it more than once.")}else console.warn("The current environment doesn't support or allowNotification is false.")},t}();F.GNS=Pt;var Ot={},At={},Rt={},It={};!function(t){t.__esModule=!0,t.default=function(){}}(It);var xt={};!function(t){t.__esModule=!0;var e=L,n=function(){function t(){}return t.prototype.validateId=function(t,n){if(e.default.isEmpty(t))throw{code:400,content:" ".concat(n," is required.")};if(!e.default.isStringOrNumber(t))throw{code:400,content:"TypeError: ".concat(n," require string or number.")}},t.prototype.validateIdArray=function(t,n){if(!Array.isArray(t)||0===t.length)throw{code:400,content:"TypeError: ".concat(n," require array.")};if(t.length>300)throw{code:400,content:"".concat(n," is over max length 500.")};for(var o=0;o<t.length;o++){if(!e.default.isStringOrNumber(t[o]))throw{code:400,content:"TypeError: ".concat(n," item require string or number.")};if(e.default.isNumber(t[o])&&(t[o]=t[o].toString()),0==t[o].length)throw{code:400,content:"".concat(n," has empty item.")}}if(Array.from(new Set(t)).length<t.length)throw{code:400,content:"Duplicate element in ".concat(n)}},t.prototype.validateChannel=function(t,e){this.validateId(t,e)},t.prototype.validateChannelArray=function(t,e){this.validateIdArray(t,e)},t.prototype.validateChannelAndChannels=function(t,n){var o=!e.default.isEmpty(t),r=!e.default.isEmpty(n);if(!o&&!r)throw{code:400,content:"channel is required."};if(o&&r)throw{code:400,content:"subscribe to either channel or channels, not both."};o&&this.validateId(t,"channel"),r&&this.validateIdArray(n,"channels")},t.prototype.validateCallbackOptions=function(t){if(!e.default.isObject(t))throw{code:400,content:"bad parameters"}},t.prototype.validateNotification=function(t){function n(t,n,o){if(!(e.default.isString(t[n])&&t[n].length<=o))throw{code:400,content:"notification.".concat(n," must be a string of no more than ").concat(o," characters")}}function o(t,n,o,r){var i=t[n];if(e.default.isObject(i)&&e.default.isDef(i[o])){var s={code:400,content:"notification.vendorOptions.".concat(n,".").concat(o," require a ").concat(r,"}")},a=i[o];if("string"===r&&!e.default.isString(a))throw s;if("number"===r&&!e.default.isNumber(a))throw s}}if(!e.default.isObject(t))throw{code:400,content:"TypeError: notification requires an object."};if(n(t,"title",32),n(t,"body",50),e.default.isDef(t.sound)&&!e.default.isString(t.sound))throw{code:400,content:"notification.sound must be a string"};if(e.default.isDef(t.badge)&&!e.default.isString(t.badge))throw{code:400,content:"notification.badge must be a string"};t.badge=t.badge||"0";var r=t.vendorOptions;e.default.isObject(r)&&(o(r,"huawei","category","string"),o(r,"xiaomi","channel_id","string"),o(r,"oppo","channel_id","string"),o(r,"vivo","classification","number"),o(r,"vivo","category","string"))},t.prototype.validateValIsEmpty=function(t,n){if(e.default.isUndef(t)||e.default.isEmpty(t))throw{code:400,content:"".concat(n," is empty")}},t.prototype.validateWXMPTemplateMsg=function(t){if(e.default.isObject(t)){if(!e.default.isString(t.template_id))throw{code:400,content:"template_id must be string."};if(!e.default.isEmpty(t.url)&&!e.default.isString(t.url))throw{code:400,content:"url must be string"};if(!(e.default.isEmpty(t.miniprogram)||e.default.isString(t.miniprogram.appid)&&e.default.isString(t.miniprogram.pagepath)))throw{code:400,content:"miniprogram.appid and miniprogram.pagepath must be strings."};if(!e.default.isObject(t.data))throw{code:400,content:"data requires an object."}}else if(e.default.isPrimitive(t))throw{code:400,content:"wxmpTemplateMsg must be an object."}},t}(),o=new n;t.default=o}(xt);var Mt={};!function(t){t.__esModule=!0,t.default=function t(e){if(null===e||"object"!==h(e)||"isActiveClone"in e)return e;var n=e instanceof Array?[]:{};for(var o in e)"object"===h(e[o])?n[o]=t(e[o]):n[o]=e[o];return n}}(Mt),function(t){t.__esModule=!0;var e=It,n=L,o=W,r=q,i=lt,s=dt,a=ht,c=xt,u=O,p=Mt,f=function(){function t(){}return t.prototype.publish=function(t){n.default.isFunction(t.onFailed)||(t.onFailed=e.default),n.default.isFunction(t.onSuccess)||(t.onSuccess=e.default),this.validate(t),t.channel=t.channel.toString();var c={channel:t.channel,content:t.message,nt:t.notification,at:t.accessToken,guid:o.default.get(),q:t.qos};t.wxmpTemplateMsg&&(c.wxmpTemplateMsg=(0,p.default)(t.wxmpTemplateMsg),c.wxmpTemplateMsg.data=JSON.stringify(c.wxmpTemplateMsg.data));var f=new r.default({name:a.RocketTypes.publish,params:c,unique:!0,singleTimeout:s.SocketTimeout.commonRequestSingle,totalTimeout:s.SocketTimeout.commonRequestTotal,permission:i.Permission.WRITE,success:function(e){t.onSuccess({code:200,content:"ok"})},fail:function(e){t.onFailed({code:e.resultCode,content:e.content})}});u.G.e(f)},t.prototype.validate=function(t){if(c.default.validateChannel(t.channel,"channel"),n.default.isEmpty(t.message))throw{code:400,content:"message is required."};if(!n.default.isString(t.message))throw{code:400,content:"TypeError: message requires string."};if(t.message.length>1e4)throw{code:400,content:"Message over max length 10000."};if(t.qos&&!(t.qos in[0,1]))throw{code:400,content:"Qos must be 0 or 1."};t.wxmpTemplateMsg&&c.default.validateWXMPTemplateMsg(t.wxmpTemplateMsg),n.default.isDef(t.notification)&&c.default.validateNotification(t.notification)},t}();t.default=f}(Rt);var Dt={},Bt={__esModule:!0,Subscription:void 0},Ft=L,Lt=function(t){if(this.options=t,this.channels=t.channels||[t.channel],!Ft.default.isEmpty(t.channel)){var e=t.channel.toString();this.channels=[e]}Ft.default.isEmpty(t.channels)||(this.channels=t.channels.toString().split(","))};Bt.Subscription=Lt;var jt={};!function(t){t.__esModule=!0,t.RemoteEvents=void 0,function(t){t.message="message",t.imMessage="imMessage",t.userPresence="userPresence",t.groupPresence="groupPresence",t.PS_PRESENCE_EVENT="PS_PRESENCE_EVENT",t.IM_MSG_READ="IM_MSG_READ",t.IM_MSG_DELETED="IM_MSG_DELETED",t.IM_MSG_RECALLED="IM_MSG_RECALLED",t.RTC_RING_EVENT="RTC_RING_EVENT",t.RTC_CANCEL_RING="RTC_CANCEL_RING",t.RTC_REMOTE_USER_LEFT="RTC_REMOTE_USER_LEFT",t.RTC_CALL_END="RTC_CALL_END",t.CS_ONLINE_CHANGED="CS_ONLINE_CHANGED"}(t.RemoteEvents||(t.RemoteEvents={}))}(jt),Dt.__esModule=!0,Dt.Subscriber=void 0;var Gt=L,Ut=q,qt=lt,Wt=Bt,Vt=dt,zt=ht,Xt=jt,Ht=xt,Kt=F,Yt=O,Jt=yt,Qt=function(){function t(){this.subscriptions=[],Kt.GNS.instance.addAssembler(new(function(){function t(){}return t.prototype.assemble=function(t){return{channel:t.ch,content:t.ctt}},t.prototype.support=function(t){return!!t.ch},t}()))}return t.prototype.initialGoEasySocket=function(){Yt.G.s().addMessageObserver(Xt.RemoteEvents.message,this.onNewMessage.bind(this)),Yt.G.s().addExpiredReconnectedObserver(this.expiredResubscribe.bind(this)),Yt.G.s().addConnectedObserver(this.resubscribePresenceChannel.bind(this))},t.prototype.clearSubscriptions=function(){this.subscriptions=[]},t.prototype.expiredResubscribe=function(){var t=this;this.subscriptions.forEach((function(e){t.doSubscribe(e,!1)}))},t.prototype.resubscribePresenceChannel=function(){var t=this;this.subscriptions.forEach((function(e){var n=e.options;n.presence&&n.presence.enable&&t.doSubscribe(e,!0)}))},t.prototype.onNewMessage=function(t){if(!(t.n.indexOf("_presence")>-1)){t.a&&Yt.G.s().sendAck("ack",{publishGuid:t.i});var e={time:t.t,channel:t.n,content:t.c};this.createNotification(t),this.findSubscriptionByChannel(e.channel).options.onMessage(e)}},t.prototype.createNotification=function(t){var e=Kt.GNS.instance.supportNotification();if(Gt.default.isObject(t.nt)&&e){var n={ch:t.n,ctt:t.c};Kt.GNS.instance.createLocalNotification(t.nt.t,t.nt.c,n,t.nt.sound,t.nt.badge)}},t.prototype.subscribe=function(t){var e=this;if(Ht.default.validateChannelAndChannels(t.channel,t.channels),Gt.default.isDef(t.presence)){var n=t.presence.enable;if(!Gt.default.isBoolean(n))throw{code:400,content:"Subscription failed. presence.enable must be a boolean"};if(n&&Yt.G.s().anonymous)throw{code:400,content:"Subscription failed. If presence is enable, the id must be specified when calling the connect method"}}var o=new Wt.Subscription(t);this.doSubscribe(o,!1).then((function(){e.subscriptions.push(o),Jt.CallbackUtils.onSuccess(t,{code:200,content:"ok"})})).catch((function(e){Jt.CallbackUtils.onFailed(t,{code:e.resultCode,content:e.content})}))},t.prototype.doSubscribe=function(t,e){var n=t.options;return new Promise((function(o,r){var i=new Ut.default({name:zt.RocketTypes.subscribe,permission:qt.Permission.READ,singleTimeout:Vt.SocketTimeout.commonRequestSingle,totalTimeout:Vt.SocketTimeout.commonRequestTotal,params:{channels:t.channels,accessToken:n.accessToken,presence:n.presence,resubscribe:e},success:function(){o()},fail:function(t){r(t)}});Yt.G.e(i)}))},t.prototype.unsubscribe=function(t){var e=this;Ht.default.validateChannel(t.channel,"channel"),t.channel=t.channel.toString();var n=this.findSubscriptionByChannel(t.channel);if(n){var o=new Ut.default({name:zt.RocketTypes.unsubscribe,params:{channel:t.channel,presence:n.options.presence},permission:qt.Permission.READ,singleTimeout:Vt.SocketTimeout.commonRequestSingle,totalTimeout:Vt.SocketTimeout.commonRequestTotal,success:function(){t.onSuccess({code:200,content:"ok"}),e.removeChannel(t.channel)},fail:function(e){t.onFailed({code:e.resultCode,content:e.content})}});Yt.G.e(o)}else t.onFailed({code:400,content:"channel["+t.channel+"] is not subscribed"})},t.prototype.removeChannel=function(t){for(var e=this.subscriptions.length-1;e>=0;e--){var n=this.subscriptions[e].channels,o=n.indexOf(t);if(o>-1){n.splice(o,1),0===n.length&&this.subscriptions.splice(e,1);break}}},t.prototype.findSubscriptionByChannel=function(t){for(var e=!1,n=null,o=this.subscriptions.length-1;o>=0;o--){for(var r=this.subscriptions[o].channels,i=0;i<r.length;i++)if(r[i]==t){e=!0,n=this.subscriptions[o];break}if(e)break}return n},t}();Dt.Subscriber=Qt;var $t={__esModule:!0,History:void 0},Zt=It,te=L,ee=q,ne=lt,oe=dt,re=ht,ie=xt,se=O,ae=function(){function t(){}return t.prototype.get=function(t){te.default.isFunction(t.onSuccess)||(t.onSuccess=Zt.default),te.default.isFunction(t.onFailed)||(t.onFailed=Zt.default),ie.default.validateChannel(t.channel,"channel"),t.channel=t.channel.toString();var e=new ee.default({name:re.RocketTypes.historyMessages,permission:ne.Permission.READ,params:t,singleTimeout:oe.SocketTimeout.commonQuerySingle,totalTimeout:oe.SocketTimeout.commonQueryTotal,success:function(e){t.onSuccess({code:e.resultCode||e.code||200,content:e.content})},fail:function(e){t.onFailed({code:e.resultCode||e.code,content:e.content})}});se.G.e(e)},t}();$t.History=ae;var ce={__esModule:!0};ce.ChannelPresence=ce.PresenceService=void 0;var ue=C,pe=q,fe=O,le=lt,he=dt,de=jt,ye=ht,me=L,ge=function(){function t(){this.channelPresenceMap=new Map,fe.G.s().addDisconnectedObserver(this.expireAllChannelPresences.bind(this)),fe.G.s().addConnectedObserver(this.resubscribe.bind(this)),fe.G.s().addMessageObserver(de.RemoteEvents.PS_PRESENCE_EVENT,this.onPresenceEvent.bind(this))}return t.prototype.hereNow=function(t){var e,n=this.channelPresenceMap.get(t.channel);n&&n.queryPromise?(t.limit&&t.limit>n.membersLimit&&n.doQuery(t.limit),e=n.queryPromise):e=be(t.channel,t.limit),e.then((function(e){t.onSuccess(e)})).catch((function(e){t.onFailed(e)}))},t.prototype.subscribe=function(t){if(me.default.isUndef(t.onPresence)||!me.default.isFunction(t.onPresence))throw{code:400,content:"Subscription Presence failed. onPresence callback function is required"};var e=t.channel,n=this.channelPresenceMap.get(e);n||(n=new ve(e),this.channelPresenceMap.set(e,n)),n.subscribe(t)},t.prototype.unsubscribe=function(t){var e=this,n=t.channel;if(this.channelPresenceMap.get(n)){var o=new pe.default({name:ye.RocketTypes.PUBSUB_PRESENCE_UNSUBSCRIBE,permission:le.Permission.WRITE,singleTimeout:he.SocketTimeout.commonRequestSingle,totalTimeout:he.SocketTimeout.commonRequestTotal,params:{channel:n},success:function(o){e.channelPresenceMap.delete(n),t.onSuccess()},fail:function(e){t.onFailed(e)}});fe.G.e(o)}else t.onSuccess()},t.prototype.onPresenceEvent=function(t){this.channelPresenceMap.get(t.channel).onPresence(t)},t.prototype.expireAllChannelPresences=function(){this.channelPresenceMap.forEach((function(t,e){t.expire()}))},t.prototype.resubscribe=function(){this.channelPresenceMap.forEach((function(t,e){t.subscribed()&&t.doSubscribe()}))},t}();ce.PresenceService=ge;var ve=function(){function t(t){this.membersLimit=10,this.queried=!1,this.channel=t}return t.prototype.onPresence=function(t){return ue.__awaiter(this,void 0,void 0,(function(){return ue.__generator(this,(function(e){switch(e.label){case 0:return this.queried?(this.update(t),[3,3]):[3,1];case 1:return[4,this.queryPromise];case 2:e.sent(),e.label=3;case 3:return this.on({channel:this.channel,action:t.action,member:t.member,time:t.time,amount:this.amount,members:this.membersByLimit()}),[2]}}))}))},t.prototype.membersByLimit=function(){return this.members.slice(0,this.membersLimit)},t.prototype.subscribe=function(t){return ue.__awaiter(this,void 0,void 0,(function(){var e;return ue.__generator(this,(function(n){switch(n.label){case 0:if(t.membersLimit&&(this.membersLimit=Math.min(t.membersLimit,300)),this.subscribed())return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.doSubscribe()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),t.onFailed(e),[2];case 4:return this.on=t.onPresence,t.onSuccess(),[2]}}))}))},t.prototype.doSubscribe=function(){var t=this;return this.doQuery(this.membersLimit),new Promise((function(e,n){var o=new pe.default({name:ye.RocketTypes.PUBSUB_PRESENCE_SUBSCRIBE,permission:le.Permission.READ,params:{channel:t.channel},singleTimeout:he.SocketTimeout.commonRequestSingle,totalTimeout:he.SocketTimeout.commonRequestTotal,success:function(t){e()},fail:function(t){n(t)}});fe.G.e(o)}))},t.prototype.doQuery=function(t){var e=this;this.queryPromise=be(this.channel,t),this.queryPromise.then((function(t){e.members=t.content.members,e.amount=t.content.amount,e.queried=!0})).catch((function(t){throw t}))},t.prototype.update=function(t){if(["join","back"].includes(t.action))this.members.unshift(t.member);else if(["leave","timeout"].includes(t.action)){var e=this.members.findIndex((function(e){return e.id===t.member.id}));e>-1&&this.members.splice(e,1)}this.amount=t.amount},t.prototype.expire=function(){this.queried=!1,this.queryPromise=null},t.prototype.subscribed=function(){return void 0!==this.on},t}();function be(t,e){return e||(e=10),new Promise((function(n,o){var r={channel:t,limit:e},i=new pe.default({name:ye.RocketTypes.PUBSUB_PRESENCE_HERENOW,permission:le.Permission.READ,params:r,singleTimeout:he.SocketTimeout.commonQuerySingle,totalTimeout:he.SocketTimeout.commonQueryTotal,success:function(t){n(t)},fail:function(t){o(t)}});fe.G.e(i)}))}ce.ChannelPresence=ve,At.__esModule=!0,At.PubSub=void 0;var Se=Rt,Ee=Dt,we=$t,_e=yt,Ce=P,Ne=A,ke=O,Te=ce,Pe=function(){function t(t){this.subscriber=new Ee.Subscriber,this.options=t}return t.init=function(e){t.instance=new t(e)},t.prototype.initialGoEasySocket=function(){this.publisher=new Se.default,this.histories=new we.History,this.subscriber.initialGoEasySocket(),this.presence2=new Te.PresenceService},t.prototype.initialBeforeConnect=function(){this.subscriber.clearSubscriptions()},t.prototype.catch=function(t,e){try{this.validateOptions(),t()}catch(t){_e.CallbackUtils.onFailed(e,t)}},t.prototype.validateOptions=function(){if(!ke.G.s()||[Ce.NetworkStatus.DISCONNECTED,Ce.NetworkStatus.DISCONNECTING,Ce.NetworkStatus.CONNECT_FAILED].includes(ke.G.s().getStatus()))throw Error("Please call connect() first.");if(!this.options.modules||!this.options.modules.includes(Ne.ModuleTypes.PUBSUB))throw{code:400,content:"Invalid options: module '".concat(Ne.ModuleTypes.PUBSUB,"' is not enabled")}},t.prototype.publish=function(t){var e=this;this.catch((function(){e.publisher.publish(t)}),t)},t.prototype.subscribe=function(t){var e=this;this.catch((function(){e.subscriber.subscribe(t)}),t)},t.prototype.unsubscribe=function(t){var e=this;this.catch((function(){e.subscriber.unsubscribe(t)}),t)},t.prototype.subscribePresence=function(t){var e=this;this.catch((function(){e.presence2.subscribe(t)}),t)},t.prototype.unsubscribePresence=function(t){var e=this;this.catch((function(){e.presence2.unsubscribe(t)}),t)},t.prototype.history=function(t){var e=this;this.catch((function(){e.histories.get(t)}),t)},t.prototype.hereNow=function(t){var e=this;this.catch((function(){e.presence2.hereNow(t)}),t)},t}();At.PubSub=Pe,Ot.__esModule=!0,Ot.GoEasyPubSub=void 0;var Oe=At,Ae=function(){function t(t){Oe.PubSub.init(t)}return t.prototype.initialGoEasySocket=function(){Oe.PubSub.instance.initialGoEasySocket()},t.prototype.initialBeforeConnect=function(){Oe.PubSub.instance.initialBeforeConnect()},t.prototype.publish=function(t){Oe.PubSub.instance.publish(t)},t.prototype.subscribe=function(t){Oe.PubSub.instance.subscribe(t)},t.prototype.unsubscribe=function(t){Oe.PubSub.instance.unsubscribe(t)},t.prototype.subscribePresence=function(t){Oe.PubSub.instance.subscribePresence(t)},t.prototype.unsubscribePresence=function(t){Oe.PubSub.instance.unsubscribePresence(t)},t.prototype.history=function(t){Oe.PubSub.instance.history(t)},t.prototype.hereNow=function(t){Oe.PubSub.instance.hereNow(t)},t}();Ot.GoEasyPubSub=Ae;var Re={},Ie={},xe={exports:{}},Me=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,De=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Be=function(t){var e=t,n=t.indexOf("["),o=t.indexOf("]");-1!=n&&-1!=o&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var r=Me.exec(t||""),i={},s=14;s--;)i[De[s]]=r[s]||"";return-1!=n&&-1!=o&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},Fe={exports:{}},Le={exports:{}},je=1e3,Ge=60*je,Ue=60*Ge,qe=24*Ue,We=365.25*qe,Ve=function(t,e){e=e||{};var n=h(t);if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*We;case"days":case"day":case"d":return n*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ue;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ge;case"seconds":case"second":case"secs":case"sec":case"s":return n*je;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&!1===isNaN(t))return e.long?function(t){return ze(t,qe,"day")||ze(t,Ue,"hour")||ze(t,Ge,"minute")||ze(t,je,"second")||t+" ms"}(t):function(t){if(t>=qe)return Math.round(t/qe)+"d";if(t>=Ue)return Math.round(t/Ue)+"h";if(t>=Ge)return Math.round(t/Ge)+"m";if(t>=je)return Math.round(t/je)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ze(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}!function(t,e){function n(t){var n;function r(){if(r.enabled){var t=r,o=+new Date,i=o-(n||o);t.diff=i,t.prev=n,t.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,o){if("%%"===n)return n;c++;var r=e.formatters[o];if("function"==typeof r){var i=s[c];n=r.call(t,i),s.splice(c,1),c--}return n})),e.formatArgs.call(t,s),(r.log||e.log||console.log.bind(console)).apply(t,s)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,o=0;for(n in t)o=(o<<5)-o+t.charCodeAt(n),o|=0;return e.colors[Math.abs(o)%e.colors.length]}(t),r.destroy=o,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var o=("string"==typeof t?t:"").split(/[\s,]+/),r=o.length;for(n=0;n<r;n++)o[n]&&("-"===(t=o[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var i=e.instances[n];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,o;for(n=0,o=e.skips.length;n<o;n++)if(e.skips[n].test(t))return!1;for(n=0,o=e.names.length;n<o;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Ve,e.instances=[],e.names=[],e.skips=[],e.formatters={}}(Le,Le.exports),function(t,e){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=Le.exports).log=function(){return"object"===("undefined"==typeof console?"undefined":h(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var o="color: "+this.color;t.splice(1,0,o,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),t.splice(i,0,o)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(n())}(Fe,Fe.exports);var Xe=Be,He=Fe.exports("socket.io-client:url"),Ke=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(He("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),He("parse %s",t),n=Xe(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n};var Ye={},Je={}.toString,Qe=Array.isArray||function(t){return"[object Array]"==Je.call(t)};!function(t){Fe.exports("socket.io-parser");var e=s.exports,n=Qe;function o(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=o,t.Decoder=i;var r=t.ERROR+'"encode error"';function i(){this.reconstructor=null}function a(e){return{type:t.ERROR,data:"parser error: "+e}}o.prototype.encode=function(e,n){var o=function(e){var n=""+e.type;t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-");e.nsp&&"/"!==e.nsp&&(n+=e.nsp+",");null!=e.id&&(n+=e.id);if(null!=e.data){var o=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(e.data);if(!1===o)return r;n+=o}return n}(e);n([o])},e(i.prototype),i.prototype.add=function(e){var o;if("string"!=typeof e)throw new Error("Unknown type: "+e);o=function(e){var o=0,r={type:Number(e.charAt(0))};if(null==t.types[r.type])return a("unknown packet type "+r.type);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(var i="";"-"!==e.charAt(++o)&&(i+=e.charAt(o),o!=e.length););if(i!=Number(i)||"-"!==e.charAt(o))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(o+1))for(r.nsp="";++o;){if(","===(c=e.charAt(o)))break;if(r.nsp+=c,o===e.length)break}else r.nsp="/";var s=e.charAt(o+1);if(""!==s&&Number(s)==s){for(r.id="";++o;){var c;if(null==(c=e.charAt(o))||Number(c)!=c){--o;break}if(r.id+=e.charAt(o),o===e.length)break}r.id=Number(r.id)}if(e.charAt(++o)){var u=function(t){try{return JSON.parse(t)}catch(t){return!1}}(e.substr(o));if(!(!1!==u&&(r.type===t.ERROR||n(u))))return a("invalid payload");r.data=u}return r}(e),this.emit("decoded",o)},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}(Ye);var $e={exports:{}},Ze={},tn={},en=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var o in t)n.call(t,o)&&e.push(o);return e},nn=Qe,on=Object.prototype.toString,rn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===on.call(Blob),sn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===on.call(File),an=function t(e){if(!e||"object"!==h(e))return!1;if(nn(e)){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||rn&&e instanceof Blob||sn&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0;return!1};var cn=function(t,e,n){var o=!1;return n=n||un,r.count=t,0===t?e():r;function r(t,i){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=n):0!==r.count||o||e(null,i)}};function un(){}var pn,fn,ln,hn=String.fromCharCode;function dn(t){for(var e,n,o=[],r=0,i=t.length;r<i;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<i?56320==(64512&(n=t.charCodeAt(r++)))?o.push(((1023&e)<<10)+(1023&n)+65536):(o.push(e),r--):o.push(e);return o}function yn(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function mn(t,e){return hn(t>>e&63|128)}function gn(t,e){if(0==(4294967168&t))return hn(t);var n="";return 0==(4294965248&t)?n=hn(t>>6&31|192):0==(4294901760&t)?(yn(t,e)||(t=65533),n=hn(t>>12&15|224),n+=mn(t,6)):0==(4292870144&t)&&(n=hn(t>>18&7|240),n+=mn(t,12),n+=mn(t,6)),n+=hn(63&t|128)}function vn(){if(ln>=fn)throw Error("Invalid byte index");var t=255&pn[ln];if(ln++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function bn(t){var e,n;if(ln>fn)throw Error("Invalid byte index");if(ln==fn)return!1;if(e=255&pn[ln],ln++,0==(128&e))return e;if(192==(224&e)){if((n=(31&e)<<6|vn())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if((n=(15&e)<<12|vn()<<6|vn())>=2048)return yn(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=(7&e)<<18|vn()<<12|vn()<<6|vn())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var Sn={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,o=dn(t),r=o.length,i=-1,s="";++i<r;)s+=gn(o[i],n);return s},decode:function(t,e){var n=!1!==(e=e||{}).strict;pn=dn(t),fn=pn.length,ln=0;for(var o,r=[];!1!==(o=bn(n));)r.push(o);return function(t){for(var e,n=t.length,o=-1,r="";++o<n;)(e=t[o])>65535&&(r+=hn((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=hn(e);return r}(r)}},En=void 0!==En?En:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,wn=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),_n=wn&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),Cn=En&&En.prototype.append&&En.prototype.getBlob;function Nn(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function kn(t,e){e=e||{};var n=new En;return Nn(t).forEach((function(t){n.append(t)})),e.type?n.getBlob(e.type):n.getBlob()}function Tn(t,e){return new Blob(Nn(t),e||{})}"undefined"!=typeof Blob&&(kn.prototype=Blob.prototype,Tn.prototype=Blob.prototype);var Pn=wn?_n?Blob:Tn:Cn?kn:void 0;!function(t){var e=en,n=an,o=cn,r=Sn;"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),t.protocol=3;var i=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=e(i),a={type:"error",data:"parser error"},c=Pn;t.encodePacket=function(t,e,n,o){"function"==typeof e&&(o=e,e=!1),"function"==typeof n&&(o=n,n=null),void 0===t.data||t.data.buffer||t.data;var s=i[t.type];return void 0!==t.data&&(s+=n?r.encode(String(t.data),{strict:!1}):String(t.data)),o(""+s)},t.decodePacket=function(t,e,n){if(void 0===t)return a;if("string"==typeof t){if(n&&!1===(t=function(t){try{t=r.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return a;var o=t.charAt(0);return Number(o)==o&&s[o]?t.length>1?{type:s[o],data:t.substring(1)}:{type:s[o]}:a}o=new Uint8Array(t)[0];var i=sliceBuffer(t,1);return c&&"blob"===e&&(i=new c([i])),{type:s[o],data:i}},t.encodePayload=function(e,r,i){"function"==typeof r&&(i=r,r=null);var s=n(e);if(!e.length)return i("0:");!function(t,e,n){for(var r=new Array(t.length),i=o(t.length,n),s=function(t,n,o){e(n,(function(e,n){r[t]=n,o(e,r)}))},a=0;a<t.length;a++)s(a,t[a],i)}(e,(function(e,n){t.encodePacket(e,!!s&&r,!0,(function(t){n(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return i(e.join(""))}))},t.decodePayload=function(e,n,o){var r;if("function"==typeof n&&(o=n,n=null),""===e)return o(a,0,1);for(var i,s,c="",u=0,p=e.length;u<p;u++){var f=e.charAt(u);if(":"===f){if(""===c||c!=(i=Number(c)))return o(a,0,1);if(c!=(s=e.substr(u+1,i)).length)return o(a,0,1);if(s.length){if(r=t.decodePacket(s,n,!0),a.type===r.type&&a.data===r.data)return o(a,0,1);if(!1===o(r,u+i,p))return}u+=i,c=""}else c+=f}return""!==c?o(a,0,1):void 0}}(tn);var On=tn,An=Rn;function Rn(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}(0,s.exports)(Rn.prototype),Rn.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},Rn.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Rn.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Rn.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},Rn.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Rn.prototype.onData=function(t){var e=On.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Rn.prototype.onPacket=function(t){this.emit("packet",t)},Rn.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var In,xn={encode:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},decode:function(t){for(var e={},n=t.split("&"),o=0,r=n.length;o<r;o++){var i=n[o].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},Mn=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Dn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Bn=64,Fn={},Ln=0,jn=0;function Gn(t){var e="";do{e=Dn[t%Bn]+e,t=Math.floor(t/Bn)}while(t>0);return e}function Un(){var t=Gn(+new Date);return t!==In?(Ln=0,In=t):t+"."+Gn(Ln++)}for(;jn<Bn;jn++)Fn[Dn[jn]]=jn;Un.encode=Gn,Un.decode=function(t){var e=0;for(jn=0;jn<t.length;jn++)e=e*Bn+Fn[t.charAt(jn)];return e};var qn=Un,Wn={exports:{}};try{Wn.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){Wn.exports=!1}var Vn=Wn.exports,zn=function(t){var e=t.xdomain,n=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Vn))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(t){}if(!e)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}},Xn=An,Hn=xn,Kn=tn,Yn=Mn,Jn=qn,Qn=Fe.exports("engine.io-client:polling"),$n=to,Zn=null!=new zn({xdomain:!1}).responseType;function to(t){var e=t&&t.forceBase64;Zn&&!e||(this.supportsBinary=!1),Xn.call(this,t)}Yn(to,Xn),to.prototype.name="polling",to.prototype.doOpen=function(){this.poll()},to.prototype.pause=function(t){var e=this;function n(){Qn("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(Qn("we are currently polling - waiting to pause"),o++,this.once("pollComplete",(function(){Qn("pre-pause polling complete"),--o||n()}))),this.writable||(Qn("we are currently writing - waiting to pause"),o++,this.once("drain",(function(){Qn("pre-pause writing complete"),--o||n()})))}else n()},to.prototype.poll=function(){Qn("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},to.prototype.onData=function(t){var e=this;Qn("polling got data %s",t);Kn.decodePayload(t,this.socket.binaryType,(function(t,n,o){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():Qn('ignoring poll - transport state "%s"',this.readyState))},to.prototype.doClose=function(){var t=this;function e(){Qn("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(Qn("transport open - closing"),e()):(Qn("transport not open - deferring close"),this.once("open",e))},to.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};Kn.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},to.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=Jn()),this.supportsBinary||t.sid||(t.b64=1),t=Hn.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t};var eo,no=$n,oo=co,ro=/\n/g,io=/\\n/g;function so(){}function ao(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function co(t){if(no.call(this,t),this.query=this.query||{},!eo){var e=ao();eo=e.___eio=e.___eio||[]}this.index=eo.length;var n=this;eo.push((function(t){n.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=so)}),!1)}Mn(co,no),co.prototype.supportsBinary=!1,co.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),no.prototype.doClose.call(this)},co.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},co.prototype.doWrite=function(t,e){var n=this;if(!this.form){var o,r=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i}function a(){c(),e()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(t)}catch(t){(o=document.createElement("iframe")).name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}this.form.action=this.uri(),c(),t=t.replace(io,"\\\n"),this.area.value=t.replace(ro,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&a()}:this.iframe.onload=a};var uo,po,fo=An,lo=tn,ho=xn,yo=Mn,mo=qn,go=Fe.exports("engine.io-client:websocket");("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket)&&("undefined"!=typeof WebSocket?uo=WebSocket:"undefined"!=typeof self&&(uo=self.WebSocket||self.MozWebSocket));var vo=uo||po;("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket)&&"undefined"==typeof GameGlobal||(vo=function(t){var e=this;if(e.onopen=function(){},e.onclose=function(){},e.onmessage=function(t){},e.onerror=function(t){},"object"===("undefined"==typeof tt?"undefined":h(tt))&&tt.getSystemInfo){var n=tt.connectSocket({url:t});e.send=function(t){n.send({data:t})},e.close=function(){n.close()},n.onOpen((function(){e.onopen()})),n.onError((function(t){e.onerror(t)})),n.onMessage((function(t){e.onmessage(t)})),n.onClose((function(){e.onclose()}))}else if("undefined"!=typeof my)my.connectSocket({url:t}),e.send=function(t){my.sendSocketMessage({data:t})},e.close=function(t){my.closeSocket()},my.onSocketOpen((function(t){e.onopen()})),my.onSocketError((function(t){e.onerror(t)})),my.onSocketMessage((function(t){e.onmessage(t)})),my.onSocketClose((function(t){e.onclose(t)}));else if("undefined"!=typeof uni)if("undefined"!=typeof my)my.connectSocket({url:t}),e.send=function(t){my.sendSocketMessage({data:t})},e.close=function(t){my.closeSocket()},my.onSocketOpen((function(t){e.onopen()})),my.onSocketError((function(t){e.onerror(t)})),my.onSocketMessage((function(t){e.onmessage(t)})),my.onSocketClose((function(t){e.onclose(t)}));else{var o=uni.connectSocket({url:t,complete:function(){}});e.send=function(t){o.send({data:t})},e.close=function(){o.close()},o.onOpen((function(t){e.onopen()})),o.onError((function(t){e.onerror(t)})),o.onMessage((function(t){e.onmessage(t)})),o.onClose((function(t){e.onclose()}))}else{var r=wx.connectSocket({url:t});e.send=function(t){r.send({data:t})},e.close=function(t){r.close({code:1e3})},r.onOpen((function(){e.onopen()})),r.onError((function(t){e.onerror(t)})),r.onMessage((function(t){e.onmessage(t)})),r.onClose((function(t){e.onclose(t)}))}});var bo=So;function So(t){t&&t.forceBase64&&(this.supportsBinary=!1),("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket)&&(this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=uo&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(vo=po)),fo.call(this,t)}yo(So,fo),So.prototype.name="websocket",So.prototype.supportsBinary=!1,So.prototype.doOpen=function(){if(this.check()){var t,e,n=this.uri();("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket)&&(t=this.protocols),(e=("undefined"!=typeof uni||"undefined"!=typeof wx&&"undefined"!=typeof my)&&"undefined"==typeof WebSocket?{agent:this.agent}:{agent:this.agent,perMessageDeflate:this.perMessageDeflate}).pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{"undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket?this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new vo(n,t):new vo(n):new vo(n,t,e):this.ws=new vo(n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},So.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},So.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,o=0,r=n;o<r;o++)!function(t){lo.encodePacket(t,e.supportsBinary,(function(o){if("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my||"undefined"!=typeof WebSocket){if(!e.usingBrowserWebSocket){var r={};if(t.options&&(r.compress=t.options.compress),e.perMessageDeflate)("string"==typeof o?Buffer.byteLength(o):o.length)<e.perMessageDeflate.threshold&&(r.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(o):e.ws.send(o,r)}catch(t){go("websocket closed before onclose event")}}else try{e.ws.send(o)}catch(t){go("websocket closed before onclose event")}--n||i()}))}(t[o]);function i(){e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0)}},So.prototype.onClose=function(){fo.prototype.onClose.call(this)},So.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},So.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=mo()),this.supportsBinary||(t.b64=1),(t=ho.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},So.prototype.check=function(){return!(!vo||"__initialize"in vo&&this.name===So.prototype.name)};var Eo=oo,wo=bo;Ze.polling=function(t){var e=!1,n=!1;if(t.jsonp,"undefined"!=typeof location){var o="https:"===location.protocol,r=location.port;r||(r=o?443:80),e=t.hostname!==location.hostname||r!==t.port,n=t.secure!==o}return t.xdomain=e,t.xscheme=n,new Eo(t)},Ze.websocket=wo;var _o=[].indexOf,Co=function(t,e){if(_o)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},No=Ze,ko=s.exports,To=Fe.exports("engine.io-client:socket"),Po=Co,Oo=tn,Ao=Be,Ro=xn,Io=xo;function xo(t,e){if(!(this instanceof xo))return new xo(t,e);e=e||{},t&&"object"===h(t)&&(e=t,t=null),t?(t=Ao(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ao(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=Ro.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}xo.priorWebsocketSuccess=!1,ko(xo.prototype),xo.protocol=Oo.protocol,xo.Socket=xo,xo.Transport=An,xo.transports=Ze,xo.parser=tn,xo.prototype.createTransport=function(t){To('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=Oo.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new No[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},xo.prototype.open=function(){var t;if(this.rememberUpgrade&&xo.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},xo.prototype.setTransport=function(t){To("setting transport %s",t.name);var e=this;this.transport&&(To("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},xo.prototype.probe=function(t){To('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,o=this;function r(){if(o.onlyBinaryUpgrades){var r=!this.supportsBinary&&o.transport.supportsBinary;n=n||r}n||(To('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(To('probe transport "%s" pong',t),o.upgrading=!0,o.emit("upgrading",e),!e)return;xo.priorWebsocketSuccess="websocket"===e.name,To('pausing current transport "%s"',o.transport.name),o.transport.pause((function(){n||"closed"!==o.readyState&&(To("changing transport and sending upgrade packet"),p(),o.setTransport(e),e.send([{type:"upgrade"}]),o.emit("upgrade",e),e=null,o.upgrading=!1,o.flush())}))}else{To('probe transport "%s" failed',t);var i=new Error("probe error");i.transport=e.name,o.emit("upgradeError",i)}})))}function i(){n||(n=!0,p(),e.close(),e=null)}function s(n){var r=new Error("probe error: "+n);r.transport=e.name,i(),To('probe transport "%s" failed because of error: %s',t,n),o.emit("upgradeError",r)}function a(){s("transport closed")}function c(){s("socket closed")}function u(t){e&&t.name!==e.name&&(To('"%s" works - aborting "%s"',t.name,e.name),i())}function p(){e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",a),o.removeListener("close",c),o.removeListener("upgrading",u)}xo.priorWebsocketSuccess=!1,e.once("open",r),e.once("error",s),e.once("close",a),this.once("close",c),this.once("upgrading",u),e.open()},xo.prototype.onOpen=function(){if(To("socket open"),this.readyState="open",xo.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){To("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},xo.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(To('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else To('packet received with socket readyState "%s"',this.readyState)},xo.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},xo.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},xo.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){To("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},xo.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},xo.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},xo.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(To("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},xo.prototype.write=xo.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},xo.prototype.sendPacket=function(t,e,n,o){if("function"==typeof e&&(o=e,e=void 0),"function"==typeof n&&(o=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}},xo.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?o():e()})):this.upgrading?o():e()}function e(){t.onClose("forced close"),To("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function o(){t.once("upgrade",n),t.once("upgradeError",n)}return this},xo.prototype.onError=function(t){To("socket error %j",t),xo.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},xo.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){To('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},xo.prototype.filterUpgrades=function(t){for(var e=[],n=0,o=t.length;n<o;n++)~Po(this.transports,t[n])&&e.push(t[n]);return e},$e.exports=Io,$e.exports.parser=tn;var Mo={exports:{}},Do=function(t,e){for(var n=[],o=(e=e||0)||0;o<t.length;o++)n[o-e]=t[o];return n};var Bo=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}};var Fo=[].slice,Lo=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=Fo.call(arguments,2);return function(){return e.apply(t,n.concat(Fo.call(arguments)))}};!function(t,e){var n=Ye,o=s.exports,r=Do,i=Bo,a=Lo,c=(Fe.exports("socket.io-client:socket"),xn),u=an;t.exports=l;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;function l(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[i(t,"open",a(this,"onopen")),i(t,"packet",a(this,"onpacket")),i(t,"close",a(this,"onclose"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},l.prototype.send=function(){var t=r(arguments);return t.unshift("message"),this.emit.apply(this,t),this},l.prototype.emit=function(t){if(p.hasOwnProperty(t))return f.apply(this,arguments),this;var e=r(arguments),o={type:(void 0!==this.flags.binary?this.flags.binary:u(e))?n.BINARY_EVENT:n.EVENT,data:e,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(this.ids,this.acks[this.ids]=e.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this},l.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},l.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var t="object"===h(this.query)?c.encode(this.query):this.query;this.packet({type:n.CONNECT,query:t})}else this.packet({type:n.CONNECT})},l.prototype.onclose=function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},l.prototype.onpacket=function(t){var e=t.nsp===this.nsp,o=t.type===n.ERROR&&"/"===t.nsp;if(e||o)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",t.data)}},l.prototype.onevent=function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},l.prototype.ack=function(t){var e=this,o=!1;return function(){if(!o){o=!0;var i=r(arguments);e.packet({type:u(i)?n.BINARY_ACK:n.ACK,id:t,data:i})}}},l.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(t.id,t.data,e.apply(this,t.data),delete this.acks[t.id]):t.id},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){this.nsp,this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(this.nsp,this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(t){return this.flags.compress=t,this},l.prototype.binary=function(t){return this.flags.binary=t,this}}(Mo);var jo=Go;function Go(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Go.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Go.prototype.reset=function(){this.attempts=0},Go.prototype.setMin=function(t){this.ms=t},Go.prototype.setMax=function(t){this.max=t},Go.prototype.setJitter=function(t){this.jitter=t};var Uo={},qo={},Wo={__esModule:!0,Cookie:void 0},Vo=C,zo=function(){function t(){}return t.get=function(t){var e,n,o=encodeURIComponent(t)+"=",r=document.cookie.split("; ");try{for(var i=Vo.__values(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.startsWith(o))return decodeURIComponent(a.substring(o.length))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},t.set=function(t,e,n,o,r,i){void 0===r&&(r="/"),void 0===i&&(i=!1);var s=encodeURIComponent(t)+"="+encodeURIComponent(e);n instanceof Date&&(s+="; expires="+n.toGMTString()),r&&(s+="; path="+r),o&&(s+="; domain="+o),i&&(s+="; secure"),document.cookie=s},t.remove=function(e,n,o,r){void 0===o&&(o="/"),void 0===r&&(r=!1),t.set(e,"",new Date(0),n,o,r)},t}();Wo.Cookie=zo,qo.__esModule=!0,qo.LocalStorageDispatcher=qo.BrowserStorage=qo.AbstractLocalStorage=void 0;var Xo=C,Ho=Wo,Ko=f,Yo=y,Jo=function(){function t(){}return t.prototype.asyncGet=function(t){var e=this.get(t);return Promise.resolve(e)},t.prototype.asyncPut=function(t,e){return this.put(t,e),Promise.resolve()},t.prototype.get=function(t){var e=this.doGet(t);return e=JSON.parse(e)},t.prototype.put=function(t,e){this.doPut(t,JSON.stringify(e))},t}();qo.AbstractLocalStorage=Jo;var Qo=function(t){function e(){var e=t.call(this)||this;e.domain=null;return e.domain="undefined"!=typeof location&&/^(?:[A-za-z0-9-]+\.)+[A-za-z]{2,4}(?:[\/\?#][\/=\?%\-&~`@[\]\':+!\.#\w]*)?$/.test(location.host)?location.host.split(".").slice(-2).join("."):null,e}return Xo.__extends(e,t),e.prototype.doGet=function(t){return Ho.Cookie.get(t)||null},e.prototype.doPut=function(t,e){var n=new Date(2030,12,31,0,0,0,0),o=this.domain;Ho.Cookie.set(t,e,n,o)},e.prototype.remove=function(t){var e=this.domain;Ho.Cookie.remove(t,e)},e.prototype.support=function(){return"undefined"!=typeof navigator&&!0===navigator.cookieEnabled},e}(Jo),$o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.doGet=function(t){return localStorage.getItem(t)||null},e.prototype.doPut=function(t,e){localStorage.setItem(t,e)},e.prototype.remove=function(t){localStorage.removeItem(t)},e.prototype.support=function(){return!("undefined"!=typeof GameGlobal||"undefined"==typeof localStorage||!localStorage.setItem)},e}(Jo),Zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.doGet=function(t){return uni.getStorageSync(t)||null},e.prototype.doPut=function(t,e){uni.setStorageSync(t,e)},e.prototype.remove=function(t){uni.removeStorageSync(t)},e.prototype.support=function(){return!("object"!==("undefined"==typeof uni?"undefined":h(uni))||!uni.getStorageSync)},e}(Jo),tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.doGet=function(t){return cc.sys.localStorage.getItem(t)||null},e.prototype.doPut=function(t,e){cc.sys.localStorage.setItem(t,e)},e.prototype.remove=function(t){cc.sys.localStorage.removeItem(t)},e.prototype.support=function(){return"undefined"!=typeof cc&&void 0!==cc.sys.localStorage},e}(Jo),er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.doGet=function(t){return wx.getStorageSync(t)||null},e.prototype.doPut=function(t,e){wx.setStorageSync(t,e)},e.prototype.remove=function(t){wx.removeStorageSync(t)},e.prototype.support=function(){return!("object"!==("undefined"==typeof wx?"undefined":h(wx))||!wx.getStorageSync)},e}(Jo),nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.asyncGet=function(t){return Xo.__awaiter(this,void 0,void 0,(function(){var e;return Xo.__generator(this,(function(n){switch(n.label){case 0:return[4,Ko.RNPlugins.asyncStorage.getItem(t)];case 1:return e=n.sent(),[2,JSON.parse(e)]}}))}))},e.prototype.asyncPut=function(t,e){return Ko.RNPlugins.asyncStorage.setItem(t,JSON.stringify(e))},e.prototype.doPut=function(t,e){throw new Error("Method not implemented.")},e.prototype.remove=function(t){Ko.RNPlugins.asyncStorage.removeItem(t)},e.prototype.support=function(){return Yo.FrameworkDetector.currentFramework()===Yo.Framework.REACT_NATIVE},e.prototype.doGet=function(t){throw new Error("Method not implemented.")},e}(Jo),or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xo.__extends(e,t),e.prototype.doGet=function(t){var e=my.getStorageSync({key:t}).data||null;return JSON.parse(e)},e.prototype.doPut=function(t,e){my.setStorageSync({key:t,data:JSON.stringify(e)})},e.prototype.remove=function(t){my.removeStorageSync({key:t})},e.prototype.support=function(){return!("undefined"==typeof my||!my.getStorageSync)},e}(Jo);!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Xo.__extends(e,t),e.prototype.doGet=function(t){return qq.getStorageSync(t)||null},e.prototype.doPut=function(t,e){qq.setStorageSync(t,e)},e.prototype.remove=function(t){qq.removeStorageSync(t)},e.prototype.support=function(){return!("undefined"==typeof qq||!qq.getStorageSync)}}(Jo),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Xo.__extends(e,t),e.prototype.doGet=function(t){return tt.getStorageSync(t)||null},e.prototype.doPut=function(t,e){tt.setStorageSync(t,e)},e.prototype.remove=function(t){tt.removeStorageSync(t)},e.prototype.support=function(){return!("object"!==("undefined"==typeof tt?"undefined":h(tt))||!tt.getStorageSync)}}(Jo),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Xo.__extends(e,t),e.prototype.doGet=function(t){return swan.getStorageSync(t)||null},e.prototype.doPut=function(t,e){swan.setStorageSync(t,e)},e.prototype.remove=function(t){swan.removeStorageSync(t)},e.prototype.support=function(){return!("undefined"==typeof swan||!swan.getStorageSync)}}(Jo);var rr=function(t){function e(){var n=t.call(this)||this;return n.api=e.dispatch(),n.api,n}return Xo.__extends(e,t),e.dispatch=function(){var t=new $o,e=new Qo;return t.support()?t:e},e.prototype.doGet=function(t){return this.api.doGet(t)},e.prototype.doPut=function(t,e){this.api.put(t,e)},e.prototype.remove=function(t){this.api.remove(t)},e.prototype.support=function(){return"undefined"!=typeof localStorage},e}(Jo);qo.BrowserStorage=rr;var ir=function(){function t(){this.supportedStorage=null;var e=t.storages;e.push(new Zo),e.push(new tr),e.push(new $o),e.push(new er),e.push(new nr),e.push(new or),e.push(new Qo),this.dispatch(),this.supportedStorage}return t.localStorage=function(){return this.instance.supportedStorage},t.prototype.dispatch=function(){var e,n;try{for(var o=Xo.__values(t.storages),r=o.next();!r.done;r=o.next()){var i=r.value;if(i.support()){this.supportedStorage=i;break}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.storages=new Array,t.instance=new t,t}();qo.LocalStorageDispatcher=ir,Uo.__esModule=!0,Uo.domainIndex=void 0;var sr=C,ar=qo,cr=N,ur=function(){function t(){this.INDEX_KEY="DOMAIN_INDEX",this.MAX=5,this.storage=ar.LocalStorageDispatcher.localStorage(),this.init()}return t.prototype.init=function(){return sr.__awaiter(this,void 0,void 0,(function(){var t,e;return sr.__generator(this,(function(n){switch(n.label){case 0:return this.support()?(this.index=Math.floor(Math.random()*(this.MAX-1)+1),null===this.storage?[3,2]:(t=this,e=parseInt,[4,this.storage.asyncGet(this.INDEX_KEY)])):[3,2];case 1:t.index=e.apply(void 0,[n.sent()])||this.index,n.label=2;case 2:return[2]}}))}))},t.prototype.refresh=function(){return sr.__awaiter(this,void 0,void 0,(function(){var t;return sr.__generator(this,(function(e){switch(e.label){case 0:return(t=this.index)>0&&t<this.MAX?t+=1:t===this.MAX&&(t=1),null===this.storage?[3,2]:(this.index=t,[4,this.storage.asyncPut(this.INDEX_KEY,t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.i=function(){var t=this.index;return this.refresh(),t},t.prototype.support=function(){return[cr.Platform.BROWSER].includes(cr.PlatformDetector.currentPlatform())},t}(),pr=new ur;Uo.domainIndex=pr;var fr=$e.exports,lr=Mo.exports,hr=s.exports,dr=Ye,yr=Bo,mr=Lo,gr=(Fe.exports("socket.io-client:manager"),Co),vr=jo,br=Uo.domainIndex,Sr=j.uniApp,Er=Object.prototype.hasOwnProperty,wr=_r;function _r(t,e){if(!(this instanceof _r))return new _r(t,e);t&&"object"===h(t)&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new vr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||dr;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}function Cr(){var t=!1;return"object"===("undefined"==typeof uni?"undefined":h(uni))&&uni.getSystemInfo&&(t=!0),t&&Sr.runningBackend()}_r.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)Er.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},_r.prototype.updateSocketIds=function(){for(var t in this.nsps)Er.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},_r.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},hr(_r.prototype),_r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},_r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},_r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},_r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},_r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},_r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},_r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},_r.prototype.open=_r.prototype.connect=function(t,e){if(this.readyState,~this.readyState.indexOf("open"))return this;this.uri,this.engine=fr(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var r=yr(n,"open",(function(){o.onopen(),t&&t()})),i=yr(n,"error",function(){var e=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){d(i,o,r,s,a,"next",t)}function a(t){d(i,o,r,s,a,"throw",t)}s(void 0)}))}}(l().mark((function e(n){var r,i,s,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!br.support()){e.next=7;break}return r=/[1-9][0-9]*/g,i=parseInt(o.uri.match(r)[0]),e.next=5,br.i();case 5:s=e.sent,o.uri=o.uri.replace(i,s);case 7:o.cleanup(),o.readyState="closed",o.emitAll("connect_error",n),t?((a=new Error("Connection error")).data=n,t(a)):o.maybeReconnectOnOpen();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());if(!1!==this._timeout){var s=this._timeout,a=setTimeout((function(){r.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(i),this},_r.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(yr(t,"data",mr(this,"ondata"))),this.subs.push(yr(t,"ping",mr(this,"onping"))),this.subs.push(yr(t,"pong",mr(this,"onpong"))),this.subs.push(yr(t,"error",mr(this,"onerror"))),this.subs.push(yr(t,"close",mr(this,"onclose"))),this.subs.push(yr(this.decoder,"decoded",mr(this,"ondecoded")))},_r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},_r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},_r.prototype.ondata=function(t){this.decoder.add(t)},_r.prototype.ondecoded=function(t){this.emit("packet",t)},_r.prototype.onerror=function(t){this.emitAll("error",t)},_r.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new lr(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",(function(){n.id=o.generateId(t)})),this.autoConnect&&r()}function r(){~gr(o.connecting,n)||o.connecting.push(n)}return n},_r.prototype.destroy=function(t){var e=gr(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},_r.prototype.packet=function(t){var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var o=0;o<n.length;o++)e.engine.write(n[o],t.options);e.encoding=!1,e.processPacketQueue()})))},_r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},_r.prototype.cleanup=function(){for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},_r.prototype.close=_r.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},_r.prototype.onclose=function(t){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},_r.prototype.reconnect=function(){if(Cr(),this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||(Cr()?(t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error","Uniapp running backend, skipped reconnect...")):t.open((function(e){e?(t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):t.onreconnect()}))))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},_r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)},function(t,e){var n=Ke,o=Ye,r=wr;Fe.exports("socket.io-client");t.exports=e=s;var i=e.managers={};function s(t,e){"object"===h(t)&&(e=t,t=void 0),e=e||{};var o,s=n(t),a=s.source,c=s.id,u=s.path,p=i[c]&&u in i[c].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||p?o=r(a,e):(i[c]||(i[c]=r(a,e)),o=i[c]),s.query&&!e.query&&(e.query=s.query),o.socket(s.path,e)}e.protocol=o.protocol,e.connect=s,e.Manager=wr,e.Socket=Mo.exports}(xe,xe.exports),function(t){t.__esModule=!0;var e=P,n=lt,o=xe.exports,r=L,i=function(){function t(){this.io=o,this.status=e.NetworkStatus.DISCONNECTED,this.permissions=[n.Permission.NONE],this.connectedObservers=[],this.disconnectedObservers=[]}return t.prototype.connect=function(){this.status=e.NetworkStatus.CONNECTING},t.prototype.socketio=function(){return this.io},t.prototype.on=function(t,e){this.io.on(t,e)},t.prototype.disconnect=function(){this.io.disconnect()},t.prototype.getStatus=function(){return this.status},t.prototype.addConnectedObserver=function(t){r.default.isFunction(t)&&this.connectedObservers.push(t)},t.prototype.addDisconnectedObserver=function(t){r.default.isFunction(t)&&this.disconnectedObservers.push(t)},t.prototype.notify=function(t,e){for(var n=0;n<t.length;n++)t[n](e)},t}();t.default=i}(Ie);var Nr={};!function(t){t.__esModule=!0;var e=C,n=P,o=function(t){function o(e){var n=t.call(this)||this;return n.reconnectingObservers=[],n.addReconnectingObserver(e.onReconnecting),n.addDisconnectedObserver(e.onDisconnected),n}return e.__extends(o,t),o.prototype.connect=function(e){t.prototype.connect.call(this),this.io=this.io.connect(e.uri,e.opts),this.initListener()},o.prototype.initListener=function(){var t=this;this.io.on("connect",(function(){t.status=n.NetworkStatus.CONNECTED,t.notify(t.connectedObservers)})),this.io.on("reconnecting",(function(e){t.status=n.NetworkStatus.CONNECTING,t.notify(t.reconnectingObservers,e)})),this.io.on("disconnect",(function(){t.status=n.NetworkStatus.DISCONNECTED,t.notify(t.disconnectedObservers)})),this.io.on("connect_error",(function(t){}))},o.prototype.addReconnectingObserver=function(t){this.reconnectingObservers.push(t)},o}(Ie.default);t.default=o}(Nr);var kr={__esModule:!0,MessageObserver:void 0},Tr=It,Pr=function(){function t(t){this.callback=Tr.default,this.guidList=[],this.callback=t}return t.prototype.onMessage=function(t,e){if("string"==typeof e&&(e=JSON.parse(e)),e.i){if(this.guidList.findIndex((function(t){return t===e.i}))>-1)return;this.guidList.unshift(e.i),this.guidList.length>300&&this.guidList.pop()}this.callback(e)},t}();kr.MessageObserver=Pr;var Or={};!function(t){t.__esModule=!0,t.CustomerStatusOptions=t.User=t.AgentOnlineOptions=t.ConversationDTO=t.MessageStatus=t.Scene=t.CallBackOptions=t.version=void 0;var e=C;t.version="2.8.8";var n,o,r=function(){};t.CallBackOptions=r,(n=t.Scene||(t.Scene={})).PRIVATE="private",n.GROUP="group",n.SYSTEM="system",n.CS="cs",(o=t.MessageStatus||(t.MessageStatus={})).NEW="new",o.SENDING="sending",o.SUCCESS="success",o.FAIL="fail";var i=function(){};t.ConversationDTO=i;var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(n,t),n}(r);t.AgentOnlineOptions=s;var a=function(t,e){this.id=t,this.data=e};t.User=a;var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(n,t),n}(r);t.CustomerStatusOptions=c}(Or);var Ar={};!function(t){t.__esModule=!0,t.SOCKET_INTERNAL_EVENTS=void 0,(t.SOCKET_INTERNAL_EVENTS||(t.SOCKET_INTERNAL_EVENTS={})).MANUAL_DISCONNECTED="MANUAL_DISCONNECTED"}(Ar);var Rr={__esModule:!0,ServerMarkRepository:void 0},Ir=C,xr=qo,Mr=function(){function t(){}return t.get=function(){return Ir.__awaiter(this,void 0,void 0,(function(){var e,n;return Ir.__generator(this,(function(o){switch(o.label){case 0:return null===(e=xr.LocalStorageDispatcher.localStorage())?[3,2]:[4,e.asyncGet(t.SM_KEY)];case 1:n=o.sent(),o.label=2;case 2:return[2,n]}}))}))},t.put=function(e){return Ir.__awaiter(this,void 0,void 0,(function(){var n,o;return Ir.__generator(this,(function(r){return n=xr.LocalStorageDispatcher.localStorage(),o=e.sm,null!==n&&o&&n.asyncPut(t.SM_KEY,o),[2]}))}))},t.SM_KEY="GE-SM",t}();Rr.ServerMarkRepository=Mr;var Dr={},Br={__esModule:!0,ZE:void 0},Fr=function(){function t(){}return t.e=function(t,e){var n=32,o=126;function r(t){return function(t){return t>=n&&t<=o}(t)?String.fromCharCode(function(t){var r=t+e;return r>o?n+(r-o):r}(t)):String.fromCharCode(t)}for(var i="",s=0;s<t.length;s++){i+=r(t.charCodeAt(s))}return i},t}();Br.ZE=Fr,Dr.__esModule=!0,Dr.Z=void 0;var Lr=C,jr=N,Gr=y,Ur=Br,qr=f,Wr=function(){function t(){}return t.initRNUniqueId=function(){if(Gr.FrameworkDetector.currentFramework()===Gr.Framework.REACT_NATIVE){var t=qr.RNPlugins.platform,e=t.constants,n={os:t.OS};return"android"===n.os?n.f=e.Fingerprint:n.v=t.Version,JSON.stringify(n)}return null},t.initPlusDeviceId=function(){return new Promise((function(t,e){"undefined"!=typeof plus?plus.device.getInfo({success:function(e){t(e.uuid)},fail:function(t){e(t)}}):t(null)}))},t.getVideoCard=function(){var t;if(jr.PlatformDetector.currentPlatform()===jr.Platform.BROWSER&&"undefined"!=typeof document){var e=document.createElement("canvas"),n=null!==(t=e.getContext("webgl"))&&void 0!==t?t:e.getContext("experimental-webgl");if(n&&"getExtension"in n){var o=0,r=0;if(navigator.userAgent.indexOf("Firefox")>-1)r=n.VENDOR,o=n.RENDERER;else{var i=n.getExtension("WEBGL_debug_renderer_info");if(!i)return null;r=i.UNMASKED_VENDOR_WEBGL,o=i.UNMASKED_RENDERER_WEBGL}var s={vendor:(n.getParameter(r)||"").toString(),renderer:(n.getParameter(o)||"").toString()};return JSON.stringify(s)}}return null},t.z=function(){return Lr.__awaiter(this,void 0,void 0,(function(){var t;return Lr.__generator(this,(function(e){return t={p:jr.PlatformDetector.currentPlatform(),f:Gr.FrameworkDetector.currentFramework(),vc:this.getVideoCard(),rfp:this.initRNUniqueId()},[2,Ur.ZE.e(JSON.stringify(t),5)]}))}))},t}();return Dr.Z=Wr,function(t){t.__esModule=!0;var e=C,n=Nr,o=q,i=lt,s=P,a=kr,c=L,u=dt,p=Or,f=ht,l=F,h=r,d=Ar,y=Rr,m=Dr,g=Uo,v=R,b=O,S=function(t){function r(e,o){var r=t.call(this)||this;return r.ioSocket=null,r.sid=null,r.anonymous=!1,r.userId=null,r.artifactVersion=p.version,r.uri=null,r.ioOpts=null,r.reconnectingTimes=0,r.messageObservers={},r.connectFailedObservers=[],r.connectingObservers=[],r.expiredReconnectedObservers=[],r.options=e,r.connectOptions=o,r.ioSocket=new n.default({onDisconnected:r.onIoDisconnected.bind(r),onReconnecting:r.onIoReconnecting.bind(r)}),r.ioSocketEmitter=new v.Emitter(r.ioSocket),r.ioSocket.addConnectedObserver(r.onIoReconnected.bind(r)),r.initUserId(),r.addConnectedObserver(o.onSuccess),r.addConnectFailedObserver(o.onFailed),r.addConnectingObserver(o.onProgress),r}return e.__extends(r,t),r.prototype.initUserId=function(){var t=this.connectOptions.id;c.default.isEmpty(t)?this.anonymous=!0:this.userId=t.toString()},r.prototype.socketio=function(){return this.ioSocket.socketio()},r.prototype.extendOptions=function(){var t=this.connectOptions;if(c.default.isNull(t.data)||c.default.isDef(t.data)&&!c.default.isObject(t.data))throw{code:400,content:"TypeError: data requires an object."};if((c.default.isDef(t.data)?String(t.data).length:0)>300&&c.default.isObject(t)&&c.default.isFunction(t.onFailed))throw{code:400,content:"user.data-length limit 300 byte."};if(c.default.isObject(t.wxmpId)){if(c.default.isEmpty(t.wxmpId.appid))throw{code:400,content:"wxmpId.appid is required."};if(c.default.isEmpty(t.wxmpId.openid))throw{code:400,content:"wxmpId.openid is required. requires string."}}else if(c.default.isPrimitive(t.wxmpId))throw{code:400,content:"TypeError: wxmpId requires an object."}},r.prototype.initUriAndOpts=function(){var t=this.options,e=!0;if(g.domainIndex.support()){var n="://"+g.domainIndex.i()+t.host,o=void 0;!0===t.supportOldBrowser?(o=["polling","websocket"],e=!1):o=["websocket"],!1!==t.forceTLS&&e?this.uri="https"+n+":443":this.uri="http"+n+":80",this.ioOpts={transports:o,timeout:u.SocketTimeout.connect}}else this.uri="https://wx-"+t.host+":443",this.ioOpts={transports:["websocket"],reconnectionDelayMax:u.SocketTimeout.reconnectionDelayMax}},r.prototype.onIoReconnected=function(){this.status===s.NetworkStatus.RECONNECTING&&this.authorize()},r.prototype.sendAck=function(t,e){this.ioSocket.io.emit(t,e)},r.prototype.connect=function(){this.initUriAndOpts(),this.extendOptions(),t.prototype.connect.call(this),this.onConnecting(),this.ioSocket.connect({uri:this.uri,opts:this.ioOpts}),this.authorize()},r.prototype.disconnect=function(){var t=this;return new Promise((function(e,n){var r=function(){t.status=s.NetworkStatus.DISCONNECTED,t.ioSocket.disconnect(),h.GoEasyEventCenter.fire(d.SOCKET_INTERNAL_EVENTS.MANUAL_DISCONNECTED),e()};if(t.options.allowNotification){var a=new o.default({name:f.RocketTypes.manualDisconnect,params:{},permission:i.Permission.READ,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,fail:function(t){n(t)},success:r});b.G.e(a)}else r()}))},r.prototype.initRegId=function(){return e.__awaiter(this,void 0,void 0,(function(){var t,n,o;return e.__generator(this,(function(e){switch(e.label){case 0:if(!((t=l.GNS.instance)&&t.supportNotification()&&t.getRegIdPromise()))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),n=this,[4,t.getRegIdPromise()];case 2:return n.regId=e.sent(),this.regId,[3,4];case 3:return o=e.sent(),console.warn("Failed to register the Manufacturers Push service:"+JSON.stringify(o)),[3,4];case 4:return[2]}}))}))},r.prototype.authorize=function(){return e.__awaiter(this,void 0,void 0,(function(){var t=this;return e.__generator(this,(function(n){return this.initRegId().then((function(){return e.__awaiter(t,void 0,void 0,(function(){var t,n,r,s,a=this;return e.__generator(this,(function(e){switch(e.label){case 0:return t=this.connectOptions,s={appkey:this.options.appkey,userId:this.userId,userData:JSON.stringify(t.data),otp:t.otp,artifactVersion:this.artifactVersion,sid:this.sid,allowNT:this.options.allowNotification,regId:this.regId,wxmpId:t.wxmpId,modules:this.options.modules,a:this.anonymous},[4,m.Z.z()];case 1:return s.z=e.sent(),[4,y.ServerMarkRepository.get()];case 2:return s.sm=e.sent(),n=s,JSON.stringify(n),r=new o.default({name:f.RocketTypes.authorize,params:n,permission:i.Permission.NONE,singleTimeout:u.SocketTimeout.commonInfiniteSingle,totalTimeout:u.SocketTimeout.commonInfiniteTotal,success:function(t){a.onAuthorizeSuccess(t)},fail:function(t){a.onAuthorizeFailed(t)}}),this.ioSocketEmitter.emit(r),[2]}}))}))})),[2]}))}))},r.prototype.onConnecting=function(){this.notify(this.connectingObservers,this.reconnectingTimes)},r.prototype.onIoReconnecting=function(){this.reconnectingTimes++,this.status==s.NetworkStatus.CONNECTED||this.status==s.NetworkStatus.EXPIRED_RECONNECTED||this.status==s.NetworkStatus.RECONNECTING?this.status=s.NetworkStatus.RECONNECTING:this.status=s.NetworkStatus.CONNECTING,this.onConnecting()},r.prototype.onIoDisconnected=function(){this.status==s.NetworkStatus.DISCONNECTING&&(this.status=s.NetworkStatus.DISCONNECTED),this.notify(this.disconnectedObservers)},r.prototype.onAuthorizeSuccess=function(t){(y.ServerMarkRepository.put(t),this.status===s.NetworkStatus.RECONNECTING)?this.sid!==t.sid?(this.status=s.NetworkStatus.EXPIRED_RECONNECTED,this.sid=t.sid,this.notify(this.expiredReconnectedObservers)):this.status=s.NetworkStatus.RECONNECTED:(this.status=s.NetworkStatus.CONNECTED,this.sid=t.sid);t.enablePublish&&(this.permissions.find((function(t){return t==i.Permission.WRITE}))||this.permissions.push(i.Permission.WRITE)),t.enableSubscribe&&(this.permissions.find((function(t){return t==i.Permission.READ}))||this.permissions.push(i.Permission.READ)),this.reconnectingTimes=0,this.notify(this.connectedObservers)},r.prototype.onAuthorizeFailed=function(t){this.ioSocket.disconnect(),this.status=s.NetworkStatus.CONNECT_FAILED;var e={code:t.resultCode||408,content:t.content||"Host unreachable or timeout"};this.notify(this.connectFailedObservers,e)},r.prototype.addConnectingObserver=function(t){c.default.isFunction(t)&&this.connectingObservers.push(t)},r.prototype.addConnectFailedObserver=function(t){c.default.isFunction(t)&&this.connectFailedObservers.push(t)},r.prototype.addExpiredReconnectedObserver=function(t){c.default.isFunction(t)&&this.expiredReconnectedObservers.push(t)},r.prototype.addMessageObserver=function(t,e){var n=this;this.messageObservers[t]||(this.messageObservers[t]=[],this.ioSocket.io.on(t,(function(e){n.notifyMessageObservers(t,e)}))),this.messageObservers[t].push(new a.MessageObserver(e))},r.prototype.notifyMessageObservers=function(t,e){for(var n=this.messageObservers[t],o=0;o<n.length;o++)n[o].onMessage(t,e)},r}(Ie.default);t.default=S}(Re),function(t){t.__esModule=!0;var e=r,n=f,o=P,i=O,s=F,a=Ot,c=L,u=Re,p=Or,l=A,h=function(){function t(e){if(c.default.isDef(t.instance)&&t.instance.getConnectionStatus()!==o.NetworkStatus.DISCONNECTED)return t.instance;this.validateOptions(e),n.RNPlugins.init(e.reactNativeOptions),this.options=e,s.GNS.init(e.allowNotification),this.pubsub=new a.GoEasyPubSub(this.options)}return t.getInstance=function(e){return c.default.isUndef(t.instance)&&(t.instance=new t(e)),t.instance},t.prototype.setBadge=function(t){s.GNS.instance.setBadge(t)},t.prototype.connect=function(t){this.getConnectionStatus()!==o.NetworkStatus.DISCONNECTED&&c.default.isObject(t)&&c.default.isFunction(t.onFailed)?t.onFailed({code:408,content:"It is already connected, don't try again until disconnect() is called. "}):(this.confirmUserIdAndData(t),e.GoEasyEventCenter.initial(),this.pubsub.initialBeforeConnect(),this.goEasySocket=new u.default(this.options,t),this.goEasySocket.connect(),i.G.i(this.goEasySocket),this.pubsub.initialGoEasySocket())},t.prototype.disconnect=function(t){this.goEasySocket.disconnect().then((function(){c.default.isObject(t)&&c.default.isFunction(t.onSuccess)&&t.onSuccess()})).catch((function(e){c.default.isObject(t)&&c.default.isFunction(t.onFailed)&&t.onFailed(e)}))},t.prototype.getConnectionStatus=function(){return this.goEasySocket?this.goEasySocket.getStatus():o.NetworkStatus.DISCONNECTED},t.prototype.validateOptions=function(t){var e="";if(!c.default.isObject(t))throw e="options is require an object.",Error(e);if(!c.default.isPrimitive(t.appkey)||0==t.appkey.length)throw e="Invalid options:'appkey' is empty.",Error(e);if(!c.default.isPrimitive(t.host)||0==t.host.length)throw e="Invalid options:'host' is empty.",Error(e);if(!c.default.isArray(t.modules))throw e="Invalid options: 'modules' must be nonempty array",Error(e);var n=[l.ModuleTypes.IM,l.ModuleTypes.PUBSUB],o=t.modules.map((function(t){var o=t.toUpperCase();if(!n.includes(o))throw e="Invalid options: module '".concat(t,"' is not support"),Error(e);return o}));t.modules=o},t.prototype.onClickNotification=function(t){s.GNS.instance.onClickNotification(t)},t.prototype.confirmUserIdAndData=function(t){if(this.options.modules.includes(l.ModuleTypes.IM)){if(!c.default.isStringOrNumber(t.id))throw{code:400,content:"TypeError: id requires number or string."};if(!c.default.isObject(t.data))throw{code:400,content:"TypeError: data requires object."}}else if("string"==typeof t.id&&t.id.length>60)throw{code:400,content:"id over max length 60"}},t.version=p.version,t}();t.default=h}(o),e(o)}));